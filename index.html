<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>なぞらぼ by nazo</title><meta name="next-head-count" content="3"/><meta name="theme-color" content="#556cd6"/><link rel="preload" href="/_next/static/media/7d8c9b0ca4a64a5a.p.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/_next/static/media/934c4b7cb736f2a3.p.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/_next/static/media/627622453ef56b0d.p.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/_next/static/media/0e4fe491bf84089c.p.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/ee9568f75555f850.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ee9568f75555f850.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-0b5d8249fb15f5f3.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-90a34299418a0f2b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-033cb479f33ab52d.js" defer=""></script><script src="/_next/static/chunks/127-e595e7778548c2e3.js" defer=""></script><script src="/_next/static/chunks/974-373dc6e1d1afb8a8.js" defer=""></script><script src="/_next/static/chunks/pages/index-3cee767daaba4211.js" defer=""></script><script src="/_next/static/ZJtsobfqSd7kc-sVhnieI/_buildManifest.js" defer=""></script><script src="/_next/static/ZJtsobfqSd7kc-sVhnieI/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global 1o285jk">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1rem;line-height:1.5;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="css 1b9ial">.css-1b9ial{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:relative;background-color:#556cd6;color:#fff;}</style><style data-emotion="css 1abkdho">.css-1abkdho{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:relative;background-color:#556cd6;color:#fff;}</style><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionRelative css-1abkdho"><style data-emotion="css i6s8oy">.css-i6s8oy{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.css-i6s8oy{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-i6s8oy{min-height:48px;}}}@media (min-width:600px){.css-i6s8oy{min-height:64px;}}</style><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-i6s8oy"><style data-emotion="css 1arzyzr">.css-1arzyzr{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><style data-emotion="css 1tqdl5x">.css-1tqdl5x{margin:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone css-1tqdl5x" href="/"><style data-emotion="css 15r940s">.css-15r940s{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:1.25rem;line-height:1.6;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;}</style><h6 class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap css-15r940s">なぞらぼ</h6></a></div></header><main><style data-emotion="css 10m0cap">.css-10m0cap{background-color:#fff;padding-top:64px;padding-bottom:48px;}</style><div class="MuiBox-root css-10m0cap"><style data-emotion="css 1m6pqln">.css-1m6pqln{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-1m6pqln{padding-left:24px;padding-right:24px;}}@media (min-width:600px){.css-1m6pqln{max-width:600px;}}</style><div class="MuiContainer-root MuiContainer-maxWidthSm css-1m6pqln"><style data-emotion="css arha53">.css-arha53{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:300;font-size:3.75rem;line-height:1.2;text-align:center;margin-bottom:0.35em;color:rgba(0, 0, 0, 0.87);}</style><h1 class="MuiTypography-root MuiTypography-h2 MuiTypography-alignCenter MuiTypography-gutterBottom css-arha53">なぞらぼ by nazo</h1><style data-emotion="css 5zosav">.css-5zosav{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1.5rem;line-height:1.334;text-align:center;margin-bottom:16px;color:rgba(0, 0, 0, 0.6);}</style><p class="MuiTypography-root MuiTypography-h5 MuiTypography-alignCenter MuiTypography-paragraph css-5zosav">Webシステム開発ならnazoにお任せ！開発はもちろん、インフラ構築や技術選定、チームメンバー育成から経営方針の相談まで幅広く御社の業務をサポート致します。まずはご相談下さい！</p><style data-emotion="css ctvrm7">.css-ctvrm7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:32px;}.css-ctvrm7>:not(style)+:not(style){margin:0;margin-left:16px;}</style><div class="css-ctvrm7"><style data-emotion="css keqcju">.css-keqcju{font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;background-color:#556cd6;box-shadow:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);}.css-keqcju:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgb(59, 75, 149);box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);}@media (hover: none){.css-keqcju:hover{background-color:#556cd6;}}.css-keqcju:active{box-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);}.css-keqcju.Mui-focusVisible{box-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);}.css-keqcju.Mui-disabled{color:rgba(0, 0, 0, 0.26);box-shadow:none;background-color:rgba(0, 0, 0, 0.12);}</style><style data-emotion="css l2b2q7">.css-l2b2q7{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;background-color:#556cd6;box-shadow:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);}.css-l2b2q7::-moz-focus-inner{border-style:none;}.css-l2b2q7.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-l2b2q7{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-l2b2q7:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgb(59, 75, 149);box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);}@media (hover: none){.css-l2b2q7:hover{background-color:#556cd6;}}.css-l2b2q7:active{box-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);}.css-l2b2q7.Mui-focusVisible{box-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);}.css-l2b2q7.Mui-disabled{color:rgba(0, 0, 0, 0.26);box-shadow:none;background-color:rgba(0, 0, 0, 0.12);}</style><style data-emotion="css 1fxpt3z">.css-1fxpt3z{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(85, 108, 214, 0.4);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;background-color:#556cd6;box-shadow:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);}.css-1fxpt3z:hover{text-decoration-color:inherit;}.css-1fxpt3z::-moz-focus-inner{border-style:none;}.css-1fxpt3z.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1fxpt3z{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1fxpt3z:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgb(59, 75, 149);box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);}@media (hover: none){.css-1fxpt3z:hover{background-color:#556cd6;}}.css-1fxpt3z:active{box-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);}.css-1fxpt3z.Mui-focusVisible{box-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);}.css-1fxpt3z.Mui-disabled{color:rgba(0, 0, 0, 0.26);box-shadow:none;background-color:rgba(0, 0, 0, 0.12);}</style><style data-emotion="css f3d3zy">.css-f3d3zy{margin:0;color:#556cd6;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(85, 108, 214, 0.4);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;background-color:#556cd6;box-shadow:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);}.css-f3d3zy:hover{text-decoration-color:inherit;}.css-f3d3zy::-moz-focus-inner{border-style:none;}.css-f3d3zy.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-f3d3zy{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-f3d3zy:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgb(59, 75, 149);box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);}@media (hover: none){.css-f3d3zy:hover{background-color:#556cd6;}}.css-f3d3zy:active{box-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);}.css-f3d3zy.Mui-focusVisible{box-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);}.css-f3d3zy.Mui-disabled{color:rgba(0, 0, 0, 0.26);box-shadow:none;background-color:rgba(0, 0, 0, 0.12);}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeMedium MuiButton-containedSizeMedium MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeMedium MuiButton-containedSizeMedium css-f3d3zy" tabindex="0" href="https://www.linkedin.com/in/nazolabo/">今すぐ相談する</a><style data-emotion="css 8ygfn">.css-8ygfn{font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:5px 15px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border:1px solid rgba(85, 108, 214, 0.5);color:#556cd6;}.css-8ygfn:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(85, 108, 214, 0.04);border:1px solid #556cd6;}@media (hover: none){.css-8ygfn:hover{background-color:transparent;}}.css-8ygfn.Mui-disabled{color:rgba(0, 0, 0, 0.26);border:1px solid rgba(0, 0, 0, 0.12);}</style><style data-emotion="css jhvvt4">.css-jhvvt4{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:5px 15px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border:1px solid rgba(85, 108, 214, 0.5);color:#556cd6;}.css-jhvvt4::-moz-focus-inner{border-style:none;}.css-jhvvt4.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-jhvvt4{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-jhvvt4:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(85, 108, 214, 0.04);border:1px solid #556cd6;}@media (hover: none){.css-jhvvt4:hover{background-color:transparent;}}.css-jhvvt4.Mui-disabled{color:rgba(0, 0, 0, 0.26);border:1px solid rgba(0, 0, 0, 0.12);}</style><style data-emotion="css ingo21">.css-ingo21{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(85, 108, 214, 0.4);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:5px 15px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border:1px solid rgba(85, 108, 214, 0.5);color:#556cd6;}.css-ingo21:hover{text-decoration-color:inherit;}.css-ingo21::-moz-focus-inner{border-style:none;}.css-ingo21.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-ingo21{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-ingo21:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(85, 108, 214, 0.04);border:1px solid #556cd6;}@media (hover: none){.css-ingo21:hover{background-color:transparent;}}.css-ingo21.Mui-disabled{color:rgba(0, 0, 0, 0.26);border:1px solid rgba(0, 0, 0, 0.12);}</style><style data-emotion="css 11if75l">.css-11if75l{margin:0;color:#556cd6;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(85, 108, 214, 0.4);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:5px 15px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border:1px solid rgba(85, 108, 214, 0.5);color:#556cd6;}.css-11if75l:hover{text-decoration-color:inherit;}.css-11if75l::-moz-focus-inner{border-style:none;}.css-11if75l.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-11if75l{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-11if75l:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(85, 108, 214, 0.04);border:1px solid #556cd6;}@media (hover: none){.css-11if75l:hover{background-color:transparent;}}.css-11if75l.Mui-disabled{color:rgba(0, 0, 0, 0.26);border:1px solid rgba(0, 0, 0, 0.12);}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium css-11if75l" tabindex="0" href="/profile">プロフィールを見る</a></div></div></div><style data-emotion="css 18kddpf">.css-18kddpf{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;padding-top:64px;padding-bottom:64px;}@media (min-width:600px){.css-18kddpf{padding-left:24px;padding-right:24px;}}@media (min-width:900px){.css-18kddpf{max-width:900px;}}</style><div class="MuiContainer-root MuiContainer-maxWidthMd css-18kddpf"><style data-emotion="css 1tz8m30">.css-1tz8m30{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-top:-32px;width:calc(100% + 32px);margin-left:-32px;}.css-1tz8m30>.MuiGrid-item{padding-top:32px;}.css-1tz8m30>.MuiGrid-item{padding-left:32px;}</style><div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-4 css-1tz8m30"><style data-emotion="css 1twzmnh">.css-1twzmnh{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:600px){.css-1twzmnh{-webkit-flex-basis:50%;-ms-flex-preferred-size:50%;flex-basis:50%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:50%;}}@media (min-width:900px){.css-1twzmnh{-webkit-flex-basis:33.333333%;-ms-flex-preferred-size:33.333333%;flex-basis:33.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:33.333333%;}}@media (min-width:1200px){.css-1twzmnh{-webkit-flex-basis:33.333333%;-ms-flex-preferred-size:33.333333%;flex-basis:33.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:33.333333%;}}@media (min-width:1536px){.css-1twzmnh{-webkit-flex-basis:33.333333%;-ms-flex-preferred-size:33.333333%;flex-basis:33.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:33.333333%;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-6 MuiGrid-grid-md-4 css-1twzmnh"><style data-emotion="css spouv7">.css-spouv7{overflow:hidden;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion="css ctmtb0">.css-ctmtb0{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);overflow:hidden;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-ctmtb0"><style data-emotion="css 10ofaip">.css-10ofaip{padding:16px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.css-10ofaip:last-child{padding-bottom:24px;}</style><div class="MuiCardContent-root css-10ofaip"><style data-emotion="css efv7ne">.css-efv7ne{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1.5rem;line-height:1.334;margin-bottom:0.35em;}</style><h2 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-efv7ne">Webシステム開発</h2><style data-emotion="css 13g9eed">.css-13g9eed{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1rem;line-height:1.5;}</style><p class="MuiTypography-root MuiTypography-body1 css-13g9eed">月10日以内での継続した稼働を提供します。サーバーサイドを中心に多数のプログラミング言語での開発実績があり、最新の環境での開発からレガシーな環境の改善まで幅広く行います。</p></div></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-6 MuiGrid-grid-md-4 css-1twzmnh"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-ctmtb0"><div class="MuiCardContent-root css-10ofaip"><h2 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-efv7ne">Webインフラ構築（AWS, GCP）</h2><p class="MuiTypography-root MuiTypography-body1 css-13g9eed">単発または月10日以内での継続プランでインフラの構築を請け負います。クラウドネイティブかつ保守を行いやすい環境を提供します。</p></div></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-6 MuiGrid-grid-md-4 css-1twzmnh"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-ctmtb0"><div class="MuiCardContent-root css-10ofaip"><h2 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-efv7ne">Webインフラ保守</h2><p class="MuiTypography-root MuiTypography-body1 css-13g9eed">定額でインフラなどの保守とチャットサポートを請け負います。</p></div></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-6 MuiGrid-grid-md-4 css-1twzmnh"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-ctmtb0"><div class="MuiCardContent-root css-10ofaip"><h2 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-efv7ne">技術顧問</h2><p class="MuiTypography-root MuiTypography-body1 css-13g9eed">定額でチャットでの相談及び月１でのオンライン面談を請け負います。</p></div></div></div></div></div><style data-emotion="css 1c0cfyw">.css-1c0cfyw{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-1c0cfyw{padding-left:24px;padding-right:24px;}}@media (min-width:900px){.css-1c0cfyw{max-width:900px;}}</style><div class="MuiContainer-root MuiContainer-maxWidthMd css-1c0cfyw"><style data-emotion="css 1d3bbye">.css-1d3bbye{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}</style><div class="MuiGrid-root MuiGrid-container css-1d3bbye"><style data-emotion="css 15j76c0">.css-15j76c0{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:600px){.css-15j76c0{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:900px){.css-15j76c0{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1200px){.css-15j76c0{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1536px){.css-15j76c0{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-12 MuiGrid-grid-md-12 css-15j76c0"><style data-emotion="css spouv7">.css-spouv7{overflow:hidden;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion="css ctmtb0">.css-ctmtb0{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);overflow:hidden;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-ctmtb0"><style data-emotion="css 10ofaip">.css-10ofaip{padding:16px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.css-10ofaip:last-child{padding-bottom:24px;}</style><div class="MuiCardContent-root css-10ofaip"><style data-emotion="css efv7ne">.css-efv7ne{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1.5rem;line-height:1.334;margin-bottom:0.35em;}</style><h2 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-efv7ne">最近のアップデート</h2><style data-emotion="css 13g9eed">.css-13g9eed{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1rem;line-height:1.5;}</style><p class="MuiTypography-root MuiTypography-body1 css-13g9eed"><style data-emotion="css 1ontqvh">.css-1ontqvh{list-style:none;margin:0;padding:0;position:relative;padding-top:8px;padding-bottom:8px;}</style><ul class="MuiList-root MuiList-padding css-1ontqvh"><style data-emotion="css c6qs8">.css-c6qs8{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;-webkit-text-decoration:none;text-decoration:none;width:100%;box-sizing:border-box;text-align:left;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;}.css-c6qs8.Mui-focusVisible{background-color:rgba(0, 0, 0, 0.12);}.css-c6qs8.Mui-selected{background-color:rgba(85, 108, 214, 0.08);}.css-c6qs8.Mui-selected.Mui-focusVisible{background-color:rgba(85, 108, 214, 0.2);}.css-c6qs8.Mui-disabled{opacity:0.38;}</style><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><style data-emotion="css 1f8bwsm">.css-1f8bwsm{min-width:56px;color:rgba(0, 0, 0, 0.54);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}</style><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><style data-emotion="css 1tsvksn">.css-1tsvksn{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;margin-top:4px;margin-bottom:4px;}</style><div class="MuiListItemText-root css-1tsvksn"><style data-emotion="css 14h7vxj">.css-14h7vxj{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1rem;line-height:1.5;display:block;}</style><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/gcloud-aio-bigquery" rel="noreferrer" target="_blank">gcloud-aio-bigqueryでasync/awaitを使ってBigQueryのクエリを叩く</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/2023-works" rel="noreferrer" target="_blank">nazoさんの2023年とこれから（お仕事募集中です！！）</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/webtransport-go-chat" rel="noreferrer" target="_blank">webtransport-goでチャットを作ってみた</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/2022-works" rel="noreferrer" target="_blank">2022年の仕事と近況</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/terraform-2022" rel="noreferrer" target="_blank">最近の Terraform のディレクトリ構造の分け方</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/dont-use-pre-commit-hook" rel="noreferrer" target="_blank">git の pre-commit hook はなるべく使わないほうがいいのでは</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/2021-works" rel="noreferrer" target="_blank">2021年の仕事まとめ</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/entgo-ulid" rel="noreferrer" target="_blank">ent ( entgo.io/ent ) で ULID を使う</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/iac-first" rel="noreferrer" target="_blank"> Infrastructure as Codeは最初からやったほうがいい</a></span></div></li></ul><ul class="MuiList-root MuiList-padding css-1ontqvh"><li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-c6qs8"><div class="MuiListItemIcon-root css-1f8bwsm">Blog</div><div class="MuiListItemText-root css-1tsvksn"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-14h7vxj"><a href="https://nazo.hatenablog.com/entry/project-onboarding" rel="noreferrer" target="_blank">Webエンジニアが新規でプロジェクトに入った時に確認すること</a></span></div></li></ul></p></div></div></div></div></div></main><style data-emotion="css 16ybtzv">.css-16ybtzv{background-color:#fff;padding:48px;}</style><footer class="MuiBox-root css-16ybtzv"><style data-emotion="css w69gyo">.css-w69gyo{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:1rem;line-height:1.75;text-align:center;color:rgba(0, 0, 0, 0.6);}</style><p class="MuiTypography-root MuiTypography-subtitle1 MuiTypography-alignCenter css-w69gyo">このページのソースコードは <a href="https://github.com/nazo/nazo.dev" rel="noreferrer" target="_blank">https://github.com/nazo/nazo.dev</a> で公開しています。</p><style data-emotion="css 1g5e4nw">.css-1g5e4nw{margin:0;font-family:'__Roboto_2d86fc',Helvetica,Arial,sans-serif,'__Roboto_Fallback_2d86fc';font-weight:400;font-size:0.875rem;line-height:1.43;text-align:center;color:rgba(0, 0, 0, 0.6);}</style><p class="MuiTypography-root MuiTypography-body2 MuiTypography-alignCenter css-1g5e4nw">Copyright © <a color="inherit" href="https://nazo.dev/">なぞらぼ</a> <!-- -->2024<!-- -->.</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"items":[{"title":"gcloud-aio-bigqueryでasync/awaitを使ってBigQueryのクエリを叩く","link":"https://nazo.hatenablog.com/entry/gcloud-aio-bigquery","pubDate":"2024-01-09T03:00:00.000Z","author":"nazone","content":"\u003cp\u003e\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003eからBigQueryを叩くには公式の \u003ca href=\"https://pypi.org/project/google-cloud-bigquery/\"\u003egoogle-cloud-bigquery\u003c/a\u003e があるのですが、asyncioに対応していません。\u003c/p\u003e\n\n\u003cp\u003e一部のライブラリではv2側でasyncioに対応しているのですが、BigQueryはv2でも対応していないように見えます。ちなみにv1はほとんどの実装で\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/REST%20API\"\u003eREST API\u003c/a\u003eを叩いて、v2はほとんどの実装でRPC \u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003eを叩いています（どちらも全部確認したわけではありません）。一部のライブラリでv2のほうを叩くとサーバーエラーが多発したこともあり、今のところなるべくv1でasyncioを使用したいです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/GCP\"\u003eGCP\u003c/a\u003eの\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003eライブラリをasyncioで動くように書き換えたものが \u003ca href=\"https://github.com/talkiq/gcloud-aio\"\u003egcloud-aio\u003c/a\u003e で用意されており、その中に \u003ca href=\"https://pypi.org/project/gcloud-aio-bigquery/\"\u003egcloud-aio-bigquery\u003c/a\u003e があります。あまり使われているのを見かけませんが、\u003ca href=\"https://github.com/apache/airflow/blob/08f6e2e5d21382494597e6cac66725bc85729656/airflow/providers/google/provider.yaml#L89C1-L91\"\u003eAirflowのGCP周りの一部で使われている\u003c/a\u003eようです。\u003c/p\u003e\n\n\u003cp\u003eただし\u003ca href=\"https://cloud.google.com/bigquery/docs/reference/rest\"\u003eREST API\u003c/a\u003eそのままの実装になっているため、\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/REST%20API\"\u003eREST API\u003c/a\u003eの知識が必要です。手軽に使えるとは言い難いです。\u003c/p\u003e\n\n\u003ch1 id=\"REST-APIでの流れ\"\u003e\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/REST%20API\"\u003eREST API\u003c/a\u003eでの流れ\u003c/h1\u003e\n\n\u003cp\u003eまずクエリを実行するには \u003ca href=\"https://cloud.google.com/bigquery/docs/reference/rest/v2/jobs/query\"\u003ejobs.query\u003c/a\u003e を呼びます。\u003c/p\u003e\n\n\u003cp\u003e代表的なパラメーターは以下の通りです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003equery : 必須。\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SQL\"\u003eSQL\u003c/a\u003eクエリを指定する。\u003c/li\u003e\n\u003cli\u003emaxResults : １レスポンスに含まれる行数。指定しなくてもバイト数でページングされるが、指定しておいたほうが安全。\u003c/li\u003e\n\u003cli\u003etimeoutMs : \u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%A2%A5%A6%A5%C8\"\u003eタイムアウト\u003c/a\u003eの秒数\u003c/li\u003e\n\u003cli\u003euseLegacySql : BigQueryのレガシー\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SQL\"\u003eSQL\u003c/a\u003eを使用するかどうか。デフォルトtrueなのでfalseを指定しておいたほうがいい。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e実行するとジョブが作成されます。\u003c/p\u003e\n\n\u003cp\u003eレスポンスを確認してデータが完結しているか確認します。 \u003ccode\u003ejobComplete\u003c/code\u003e が true の場合、ジョブが完了して結果の行を取得できる状態です。この場合、 \u003ccode\u003erows\u003c/code\u003e に結果の行が含まれています。また、 \u003ccode\u003eschema\u003c/code\u003e に\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE\"\u003eスキーマ\u003c/a\u003eが含まれています。 \u003ccode\u003erows\u003c/code\u003e だけ見てもどの列の何のデータがの判別が難しいので、 \u003ccode\u003eschema\u003c/code\u003e と合わせて確認します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ejobComplete\u003c/code\u003e が true で、 \u003ccode\u003epageToken\u003c/code\u003e が含まれている場合、まだ読み込むべきデータが残っているので続きを読み込みます。 \u003ccode\u003epageToken\u003c/code\u003e が無ければ終了です。\u003c/p\u003e\n\n\u003cp\u003eデータが完結していない場合は、レスポンスの \u003ccode\u003ejobReference\u003c/code\u003e の \u003ccode\u003ejobId\u003c/code\u003e を拾って、（ \u003ccode\u003epageToken\u003c/code\u003e があればそれも一緒に）  \u003ca href=\"https://cloud.google.com/bigquery/docs/reference/rest/v2/jobs/getQueryResults\"\u003ejobs.getQueryResults\u003c/a\u003e を実行します。結果は jobs.query と同じです。\u003c/p\u003e\n\n\u003cp\u003e全体の流れをまとめると以下のようになります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003ejobs.query でジョブを作成\u003c/li\u003e\n\u003cli\u003ejobComplete が true なら\n\n\u003cul\u003e\n\u003cli\u003erows がない（totalRows=0）→終了\u003c/li\u003e\n\u003cli\u003erows がある→そのデータを使う\u003c/li\u003e\n\u003cli\u003epageToken がない→終了\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ejobComplete が false 、または pageToken がある→ jobs.getQueryResults を実行し、上の判定ロジックに戻る\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1 id=\"実際に使ってみる\"\u003e実際に使ってみる\u003c/h1\u003e\n\n\u003cp\u003e実際に動くものが以下になります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e asyncio\n\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e collections.abc \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e AsyncGenerator\n\n\u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e aiohttp\n\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e gcloud.aio.bigquery \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e Job\n\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e google.cloud \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e bigquery\n\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e google.cloud.bigquery._helpers \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e _rows_from_json\n\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e google.cloud.bigquery.table \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e _parse_schema_resource  \u003cspan class=\"synComment\"\u003e# type:ignore\u003c/span\u003e\n\n\n\u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003equery\u003c/span\u003e(\n    sql: \u003cspan class=\"synIdentifier\"\u003estr\u003c/span\u003e, max_results: \u003cspan class=\"synIdentifier\"\u003eint\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e100\u003c/span\u003e\n) -\u0026gt; AsyncGenerator[\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e[bigquery.Row], \u003cspan class=\"synIdentifier\"\u003eNone\u003c/span\u003e]:\n    loop = asyncio.get_running_loop()\n    \u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e \u003cspan class=\"synStatement\"\u003ewith\u003c/span\u003e aiohttp.ClientSession(loop=loop) \u003cspan class=\"synStatement\"\u003eas\u003c/span\u003e session:\n        job = Job(session=session)\n        query_request = {\n            \u003cspan class=\"synConstant\"\u003e\u0026quot;query\u0026quot;\u003c/span\u003e: sql,\n            \u003cspan class=\"synConstant\"\u003e\u0026quot;maxResults\u0026quot;\u003c/span\u003e: max_results,\n            \u003cspan class=\"synConstant\"\u003e\u0026quot;useLegacySql\u0026quot;\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e\u0026quot;false\u0026quot;\u003c/span\u003e,\n        }\n        response = \u003cspan class=\"synStatement\"\u003eawait\u003c/span\u003e job.query(query_request=query_request)\n        \u003cspan class=\"synStatement\"\u003ewhile\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eTrue\u003c/span\u003e:\n            errors = response.get(\u003cspan class=\"synConstant\"\u003e\u0026quot;errors\u0026quot;\u003c/span\u003e)\n            page_token = response.get(\u003cspan class=\"synConstant\"\u003e\u0026quot;pageToken\u0026quot;\u003c/span\u003e)\n            \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e errors \u003cspan class=\"synStatement\"\u003eis\u003c/span\u003e \u003cspan class=\"synStatement\"\u003enot\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eNone\u003c/span\u003e:\n                \u003cspan class=\"synStatement\"\u003eraise\u003c/span\u003e \u003cspan class=\"synType\"\u003eRuntimeError\u003c/span\u003e(errors)\n            \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e response.get(\u003cspan class=\"synConstant\"\u003e\u0026quot;jobComplete\u0026quot;\u003c/span\u003e):\n                \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eint\u003c/span\u003e(response.get(\u003cspan class=\"synConstant\"\u003e\u0026quot;totalRows\u0026quot;\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e)) == \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e:\n                    \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e\n                schema = _parse_schema_resource(response.get(\u003cspan class=\"synConstant\"\u003e\u0026quot;schema\u0026quot;\u003c/span\u003e, {}))\n                \u003cspan class=\"synStatement\"\u003eyield\u003c/span\u003e _rows_from_json(response.get(\u003cspan class=\"synConstant\"\u003e\u0026quot;rows\u0026quot;\u003c/span\u003e, ()), schema)\n                \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e page_token \u003cspan class=\"synStatement\"\u003eis\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eNone\u003c/span\u003e:\n                    \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e\n            \u003cspan class=\"synStatement\"\u003eelse\u003c/span\u003e:\n                \u003cspan class=\"synStatement\"\u003eawait\u003c/span\u003e asyncio.sleep(\u003cspan class=\"synConstant\"\u003e1.0\u003c/span\u003e)  \u003cspan class=\"synComment\"\u003e# 終わってなさそうなので少し待つ\u003c/span\u003e\n            \u003cspan class=\"synComment\"\u003e# ジョブの結果を確認\u003c/span\u003e\n            job = Job(\n                job_id=response[\u003cspan class=\"synConstant\"\u003e\u0026quot;jobReference\u0026quot;\u003c/span\u003e][\u003cspan class=\"synConstant\"\u003e\u0026quot;jobId\u0026quot;\u003c/span\u003e],\n                project=response[\u003cspan class=\"synConstant\"\u003e\u0026quot;jobReference\u0026quot;\u003c/span\u003e][\u003cspan class=\"synConstant\"\u003e\u0026quot;projectId\u0026quot;\u003c/span\u003e],\n                session=session,\n            )\n            params = {\n                \u003cspan class=\"synConstant\"\u003e\u0026quot;location\u0026quot;\u003c/span\u003e: response[\u003cspan class=\"synConstant\"\u003e\u0026quot;jobReference\u0026quot;\u003c/span\u003e][\u003cspan class=\"synConstant\"\u003e\u0026quot;location\u0026quot;\u003c/span\u003e],\n                \u003cspan class=\"synConstant\"\u003e\u0026quot;maxResults\u0026quot;\u003c/span\u003e: max_results,\n                \u003cspan class=\"synConstant\"\u003e\u0026quot;pageToken\u0026quot;\u003c/span\u003e: page_token,\n            }\n            response = \u003cspan class=\"synStatement\"\u003eawait\u003c/span\u003e job.get_query_results(params=params)\n\n\n\u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003emain\u003c/span\u003e() -\u0026gt; \u003cspan class=\"synIdentifier\"\u003eNone\u003c/span\u003e:\n    \u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e \u003cspan class=\"synStatement\"\u003efor\u003c/span\u003e rows \u003cspan class=\"synStatement\"\u003ein\u003c/span\u003e query(\u003cspan class=\"synConstant\"\u003e\u0026quot;SELECT * FROM `project_id.dataset_id.table`\u0026quot;\u003c/span\u003e):\n        \u003cspan class=\"synStatement\"\u003efor\u003c/span\u003e row \u003cspan class=\"synStatement\"\u003ein\u003c/span\u003e rows:\n            \u003cspan class=\"synComment\"\u003e# row[\u0026quot;key\u0026quot;] で値を取得可能\u003c/span\u003e\n            \u003cspan class=\"synStatement\"\u003efor\u003c/span\u003e key, value \u003cspan class=\"synStatement\"\u003ein\u003c/span\u003e row.items():\n                \u003cspan class=\"synIdentifier\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"synConstant\"\u003e\u0026quot;{key}={value}\u0026quot;\u003c/span\u003e)\n\n\n\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"synConstant\"\u003e\u0026quot;__main__\u0026quot;\u003c/span\u003e:\n    asyncio.run(main())\n\u003c/pre\u003e\n\n\n\u003cp\u003e雑に書いているので必要に応じて書き換えてください。\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%A2%A5%A6%A5%C8\"\u003eタイムアウト\u003c/a\u003eの設定や例外の処理などが別途必要になります。\u003c/p\u003e\n\n\u003cp\u003e結果行の整形に公式の \u003ccode\u003egoogle-cloud-bigquery\u003c/code\u003e も使っています。また、 \u003ccode\u003eaiohttp\u003c/code\u003e パッケージも必要です。\u003c/p\u003e\n\n\u003cp\u003eプロジェクトIDを指定したい場合は Job のコンスト\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/%A5%E9%A5%AF\"\u003eラク\u003c/a\u003eタで指定してもいいですし、\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4\"\u003e環境変数\u003c/a\u003e \u003ccode\u003eGOOGLE_CLOUD_PROJECT\u003c/code\u003e などで指定しても反映されます。\u003c/p\u003e\n\n\u003ch1 id=\"まとめ\"\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e公式で対応してほしいです。\u003c/p\u003e\n","contentSnippet":"PythonからBigQueryを叩くには公式の google-cloud-bigquery があるのですが、asyncioに対応していません。\n一部のライブラリではv2側でasyncioに対応しているのですが、BigQueryはv2でも対応していないように見えます。ちなみにv1はほとんどの実装でREST APIを叩いて、v2はほとんどの実装でRPC APIを叩いています（どちらも全部確認したわけではありません）。一部のライブラリでv2のほうを叩くとサーバーエラーが多発したこともあり、今のところなるべくv1でasyncioを使用したいです。\nGCPのPythonライブラリをasyncioで動くように書き換えたものが gcloud-aio で用意されており、その中に gcloud-aio-bigquery があります。あまり使われているのを見かけませんが、AirflowのGCP周りの一部で使われているようです。\nただしREST APIそのままの実装になっているため、REST APIの知識が必要です。手軽に使えるとは言い難いです。\nREST APIでの流れ\nまずクエリを実行するには jobs.query を呼びます。\n代表的なパラメーターは以下の通りです。\nquery : 必須。SQLクエリを指定する。\nmaxResults : １レスポンスに含まれる行数。指定しなくてもバイト数でページングされるが、指定しておいたほうが安全。\ntimeoutMs : タイムアウトの秒数\nuseLegacySql : BigQueryのレガシーSQLを使用するかどうか。デフォルトtrueなのでfalseを指定しておいたほうがいい。\n実行するとジョブが作成されます。\nレスポンスを確認してデータが完結しているか確認します。 jobComplete が true の場合、ジョブが完了して結果の行を取得できる状態です。この場合、 rows に結果の行が含まれています。また、 schema にスキーマが含まれています。 rows だけ見てもどの列の何のデータがの判別が難しいので、 schema と合わせて確認します。\njobComplete が true で、 pageToken が含まれている場合、まだ読み込むべきデータが残っているので続きを読み込みます。 pageToken が無ければ終了です。\nデータが完結していない場合は、レスポンスの jobReference の jobId を拾って、（ pageToken があればそれも一緒に）  jobs.getQueryResults を実行します。結果は jobs.query と同じです。\n全体の流れをまとめると以下のようになります。\njobs.query でジョブを作成\njobComplete が true なら\n\n\nrows がない（totalRows=0）→終了\nrows がある→そのデータを使う\npageToken がない→終了\njobComplete が false 、または pageToken がある→ jobs.getQueryResults を実行し、上の判定ロジックに戻る\n実際に使ってみる\n実際に動くものが以下になります。\nimport asyncio\nfrom collections.abc import AsyncGenerator\n\nimport aiohttp\nfrom gcloud.aio.bigquery import Job\nfrom google.cloud import bigquery\nfrom google.cloud.bigquery._helpers import _rows_from_json\nfrom google.cloud.bigquery.table import _parse_schema_resource  # type:ignore\n\n\nasync def query(\n    sql: str, max_results: int = 100\n) -\u003e AsyncGenerator[list[bigquery.Row], None]:\n    loop = asyncio.get_running_loop()\n    async with aiohttp.ClientSession(loop=loop) as session:\n        job = Job(session=session)\n        query_request = {\n            \"query\": sql,\n            \"maxResults\": max_results,\n            \"useLegacySql\": \"false\",\n        }\n        response = await job.query(query_request=query_request)\n        while True:\n            errors = response.get(\"errors\")\n            page_token = response.get(\"pageToken\")\n            if errors is not None:\n                raise RuntimeError(errors)\n            if response.get(\"jobComplete\"):\n                if int(response.get(\"totalRows\", 0)) == 0:\n                    return\n                schema = _parse_schema_resource(response.get(\"schema\", {}))\n                yield _rows_from_json(response.get(\"rows\", ()), schema)\n                if page_token is None:\n                    return\n            else:\n                await asyncio.sleep(1.0)  # 終わってなさそうなので少し待つ\n            # ジョブの結果を確認\n            job = Job(\n                job_id=response[\"jobReference\"][\"jobId\"],\n                project=response[\"jobReference\"][\"projectId\"],\n                session=session,\n            )\n            params = {\n                \"location\": response[\"jobReference\"][\"location\"],\n                \"maxResults\": max_results,\n                \"pageToken\": page_token,\n            }\n            response = await job.get_query_results(params=params)\n\n\nasync def main() -\u003e None:\n    async for rows in query(\"SELECT * FROM `project_id.dataset_id.table`\"):\n        for row in rows:\n            # row[\"key\"] で値を取得可能\n            for key, value in row.items():\n                print(f\"{key}={value}\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n\n\n\n雑に書いているので必要に応じて書き換えてください。タイムアウトの設定や例外の処理などが別途必要になります。\n結果行の整形に公式の google-cloud-bigquery も使っています。また、 aiohttp パッケージも必要です。\nプロジェクトIDを指定したい場合は Job のコンストラクタで指定してもいいですし、環境変数 GOOGLE_CLOUD_PROJECT などで指定しても反映されます。\nまとめ\n公式で対応してほしいです。","summary":"PythonからBigQueryを叩くには公式の google-cloud-bigquery があるのですが、asyncioに対応していません。 一部のライブラリではv2側でasyncioに対応しているのですが、BigQueryはv2でも対応していないように見えます。ちなみにv1はほとんどの実装でREST APIを叩いて、v2はほとんどの実装でRPC APIを叩いています（どちらも全部確認したわけではありません）。一部のライブラリでv2のほうを叩くとサーバーエラーが多発したこともあり、今のところなるべくv1でasyncioを使用したいです。 GCPのPythonライブラリをasyncioで動く…","id":"hatenablog://entry/6801883189072194905","isoDate":"2024-01-09T03:00:00.000Z"},{"title":"nazoさんの2023年とこれから（お仕事募集中です！！）","link":"https://nazo.hatenablog.com/entry/2023-works","pubDate":"2023-12-29T03:00:00.000Z","author":"nazone","content":"\u003cul\u003e\n\u003cli\u003e2022年 : \u003ca href=\"https://nazo.hatenablog.com/entry/2022-works\"\u003ehttps://nazo.hatenablog.com/entry/2022-works\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e2021年 : \u003ca href=\"https://nazo.hatenablog.com/entry/2021-works\"\u003ehttps://nazo.hatenablog.com/entry/2021-works\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e2020年 : \u003ca href=\"https://nazo.hatenablog.com/entry/2020-works\"\u003ehttps://nazo.hatenablog.com/entry/2020-works\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e2019年 : \u003ca href=\"https://nazo.hatenablog.com/entry/goodbye-uuum\"\u003ehttps://nazo.hatenablog.com/entry/goodbye-uuum\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1 id=\"何してたの\"\u003e何してたの？\u003c/h1\u003e\n\n\u003cp\u003e一応、仕事しています。\u003c/p\u003e\n\n\u003cp\u003eあまり細かいことは言えないのですが、\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003eでGraphQLでBigQuery x \u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/BigTable\"\u003eBigTable\u003c/a\u003eでPub/Subで…とかしつつ開発組織の\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%B5%A5%EB%A5%C6%A5%A3%A5%F3%A5%B0\"\u003eコンサルティング\u003c/a\u003e的なこともしていました。キューでタスクを分割する仕組みが思ったより快適すぎるので今後もっと使っていきたいと思いました。\u003c/p\u003e\n\n\u003cp\u003e最近の\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003eは型検査にasync/awaitとか使えて快適ですね。開発環境は\u003ca href=\"https://github.com/mitsuhiko/rye\"\u003erye\u003c/a\u003eで、black+mypy+ruff で各種検査を回しまくると\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/VSCode\"\u003eVSCode\u003c/a\u003eで自動修正やら補完やらが効きまくって今までの\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003eとは別世界です。強いて言えば各種ライブラリ（特に\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Google\"\u003eGoogle\u003c/a\u003e系）が最新のあれこれに対応していなかったりするのが難点ですね。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e Copliotが優秀すぎてコードの書き方より指示コメントの書き方がうまくなってきました。テストケースなんかも半自動生成できて、ちまちま作ってたようなものがどんどん楽になりますね。Codeじゃない\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/VIsual%20Studio\"\u003eVIsual Studio\u003c/a\u003eだと標準で入っているので、Unityを書くのとかでもものすごく楽になりました。知ってるか知らないか、知っていたら勝ちみたいな領域で勝負していた方々は今後辛いんじゃないでしょうか。\u003c/p\u003e\n\n\u003ch1 id=\"SNS断ち特にX\"\u003e\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SNS\"\u003eSNS\u003c/a\u003e断ち（特にX）\u003c/h1\u003e\n\n\u003cp\u003eもう存在を忘れられているかと思いますが、結構前から\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SNS\"\u003eSNS\u003c/a\u003eをほぼ引退しました。X（旧\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e）も\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/Facebook\"\u003eFacebook\u003c/a\u003eも過去の投稿をほぼ全て削除してありますし、特殊な事情がない限り告知以外の投稿をすることはもうありません。この記事の通知は流れているはずなので、\u003ca href=\"https://x.com/nazo\"\u003ehttps://x.com/nazo\u003c/a\u003e は告知用アカウントだと思ってください。\u003c/p\u003e\n\n\u003cp\u003e理由としては、コロナ禍あたりからの空気の変化により、少なくともXを使い続けるのは自分にとってメリットよりデメリットのほうが上回ってきたからです。X社関係の騒動とはあまり関係ありません。\u003c/p\u003e\n\n\u003cp\u003eこのブログは\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SNS\"\u003eSNS\u003c/a\u003eではないので、基本的にこのブログは更新し続けるつもりです。\u003c/p\u003e\n\n\u003cp\u003e一応Blueskyのアカウント（ \u003ca href=\"https://bsky.app/profile/nazonazo.bsky.social\"\u003ehttps://bsky.app/profile/nazonazo.bsky.social\u003c/a\u003e ）も取得してあり、万が一普段遣いとして復帰したくなった場合はこちらを使うかもしれませんが、まあそれも今のところはなさそうです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SNS\"\u003eSNS\u003c/a\u003e断ちをして思ったことは、思ったより\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SNS\"\u003eSNS\u003c/a\u003eを見てメールをくれたり連絡をしてくれたりする人というのはいたんだなということです。\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SNS\"\u003eSNS\u003c/a\u003eを動かしている間はそれなりに反応があったのですが、断ってからはスパム的なもの以外は全く来なくなってしまいました。まあブログくらい書いていればもう少し違うのでしょうが…。\u003c/p\u003e\n\n\u003cp\u003e交友関係もほぼ断ってしまったので、すっかりお仕事の話も途絶えてしまいました。難しい話です。\u003c/p\u003e\n\n\u003ch1 id=\"今後について\"\u003e今後について\u003c/h1\u003e\n\n\u003cp\u003e今の生活はとても自分に合っているので、できれば今の生活を続けていきたいのですが、特にこの先の見通しもないし収入面の不安もあるので難しそうです。\u003c/p\u003e\n\n\u003cp\u003e自分ももうすぐ42歳になり、日に日に体力も衰え、絶対にこれをやるんだ！みたいなモチベーションはもうないのですが、成功事例も増えてきましたし、自分にしかできないことも少なくないはずなので、淡々とできることをこなしていこうと思います。\u003c/p\u003e\n\n\u003ch1 id=\"お仕事募集中\"\u003eお仕事募集中\u003c/h1\u003e\n\n\u003cp\u003e引き続きお仕事を募集しております。週２〜４くらいまで・フルリモート・単価多分そこそこ高め？です。解決できる課題などは\n\u003ca href=\"https://nazo.dev/profile\"\u003ehttps://nazo.dev/profile\u003c/a\u003e をご覧下さい。フルタイム正社員でないからこそできる内容をメインにしています。\u003c/p\u003e\n\n\u003cp\u003e各種\u003ca class=\"keyword\" href=\"https://d.hatena.ne.jp/keyword/SNS\"\u003eSNS\u003c/a\u003eのDMでご連絡をお待ちしております。\u003c/p\u003e\n","contentSnippet":"2022年 : https://nazo.hatenablog.com/entry/2022-works\n2021年 : https://nazo.hatenablog.com/entry/2021-works\n2020年 : https://nazo.hatenablog.com/entry/2020-works\n2019年 : https://nazo.hatenablog.com/entry/goodbye-uuum\n何してたの？\n一応、仕事しています。\nあまり細かいことは言えないのですが、PythonでGraphQLでBigQuery x BigTableでPub/Subで…とかしつつ開発組織のコンサルティング的なこともしていました。キューでタスクを分割する仕組みが思ったより快適すぎるので今後もっと使っていきたいと思いました。\n最近のPythonは型検査にasync/awaitとか使えて快適ですね。開発環境はryeで、black+mypy+ruff で各種検査を回しまくるとVSCodeで自動修正やら補完やらが効きまくって今までのPythonとは別世界です。強いて言えば各種ライブラリ（特にGoogle系）が最新のあれこれに対応していなかったりするのが難点ですね。\nGitHub Copliotが優秀すぎてコードの書き方より指示コメントの書き方がうまくなってきました。テストケースなんかも半自動生成できて、ちまちま作ってたようなものがどんどん楽になりますね。CodeじゃないVIsual Studioだと標準で入っているので、Unityを書くのとかでもものすごく楽になりました。知ってるか知らないか、知っていたら勝ちみたいな領域で勝負していた方々は今後辛いんじゃないでしょうか。\nSNS断ち（特にX）\nもう存在を忘れられているかと思いますが、結構前からSNSをほぼ引退しました。X（旧Twitter）もFacebookも過去の投稿をほぼ全て削除してありますし、特殊な事情がない限り告知以外の投稿をすることはもうありません。この記事の通知は流れているはずなので、https://x.com/nazo は告知用アカウントだと思ってください。\n理由としては、コロナ禍あたりからの空気の変化により、少なくともXを使い続けるのは自分にとってメリットよりデメリットのほうが上回ってきたからです。X社関係の騒動とはあまり関係ありません。\nこのブログはSNSではないので、基本的にこのブログは更新し続けるつもりです。\n一応Blueskyのアカウント（ https://bsky.app/profile/nazonazo.bsky.social ）も取得してあり、万が一普段遣いとして復帰したくなった場合はこちらを使うかもしれませんが、まあそれも今のところはなさそうです。\nSNS断ちをして思ったことは、思ったよりSNSを見てメールをくれたり連絡をしてくれたりする人というのはいたんだなということです。SNSを動かしている間はそれなりに反応があったのですが、断ってからはスパム的なもの以外は全く来なくなってしまいました。まあブログくらい書いていればもう少し違うのでしょうが…。\n交友関係もほぼ断ってしまったので、すっかりお仕事の話も途絶えてしまいました。難しい話です。\n今後について\n今の生活はとても自分に合っているので、できれば今の生活を続けていきたいのですが、特にこの先の見通しもないし収入面の不安もあるので難しそうです。\n自分ももうすぐ42歳になり、日に日に体力も衰え、絶対にこれをやるんだ！みたいなモチベーションはもうないのですが、成功事例も増えてきましたし、自分にしかできないことも少なくないはずなので、淡々とできることをこなしていこうと思います。\nお仕事募集中\n引き続きお仕事を募集しております。週２〜４くらいまで・フルリモート・単価多分そこそこ高め？です。解決できる課題などは\nhttps://nazo.dev/profile をご覧下さい。フルタイム正社員でないからこそできる内容をメインにしています。\n各種SNSのDMでご連絡をお待ちしております。","summary":"2022年 : https://nazo.hatenablog.com/entry/2022-works 2021年 : https://nazo.hatenablog.com/entry/2021-works 2020年 : https://nazo.hatenablog.com/entry/2020-works 2019年 : https://nazo.hatenablog.com/entry/goodbye-uuum 何してたの？ 一応、仕事しています。 あまり細かいことは言えないのですが、PythonでGraphQLでBigQuery x BigTableでPub/Subで…とかしつつ…","id":"hatenablog://entry/6801883189057845489","isoDate":"2023-12-29T03:00:00.000Z"},{"title":"webtransport-goでチャットを作ってみた","link":"https://nazo.hatenablog.com/entry/webtransport-go-chat","pubDate":"2023-01-27T08:30:00.000Z","author":"nazone","content":"\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fnazo%2Fwebtransport-go-chat\" title=\"GitHub - nazo/webtransport-go-chat\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/nazo/webtransport-go-chat\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/n/nazone/20230127/20230127163228.png\" width=\"1200\" height=\"409\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e突然興味が出てきて書きましたが特に実用性はありません。webtransport-goがそれなりに使えるのかどうか調べるために書いたものです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/quic-go/webtransport-go\"\u003ewebtransport-goは紆余曲折あって（？）quic-goに取り込まれたようですが\u003c/a\u003e、中のファイルがまだ \u003ccode\u003egithub.com/marten-seemann/webtransport-go\u003c/code\u003e のままなので（2023年1月27日現在）、こちらの名前でimportするのが良いです。修正を投げようとも思いましたが関連する他\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\"\u003eリポジトリ\u003c/a\u003eも全て変わっていないので、そのうち修正されるのを待とうと思います。\u003c/p\u003e\n\n\u003cp\u003e切断周りの対応はちゃんと書いていません。\u003c/p\u003e\n\n\u003cp\u003eチャットメッセージはUnidirectional Streamでやりとりしています。\u003ca href=\"https://www.ietf.org/archive/id/draft-lcurley-warp-00.html\"\u003e一部で話題のTwitchのWarp\u003c/a\u003eもUnidirectionalで実装されているようです。webtransport-goはDatagramはまだ未対応のようです。\u003c/p\u003e\n\n\u003cp\u003eWebTransport自体はコネクションさえ確立されれば後はQUICなので、どうしてもブラウザ上でやりたいことがなければ普通にQUICについて調査することをフォーカスしたほうが良さそうです。ブラウザならではで想定できそうなのはやはり\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Warp\"\u003eWarp\u003c/a\u003eのような動画配信でしょうか。WebCodecsと組み合わせて実装するようです。\u003c/p\u003e\n\n\u003ch1 id=\"参考記事\"\u003e参考記事\u003c/h1\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Falivelime%2Fitems%2F539383fd9fdf06169211\" title=\"WebTransportでもテキストチャットがしたい!(WebSocket比較あり) - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://qiita.com/alivelime/items/539383fd9fdf06169211\"\u003eqiita.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n","contentSnippet":"github.com\n\n突然興味が出てきて書きましたが特に実用性はありません。webtransport-goがそれなりに使えるのかどうか調べるために書いたものです。\nwebtransport-goは紆余曲折あって（？）quic-goに取り込まれたようですが、中のファイルがまだ github.com/marten-seemann/webtransport-go のままなので（2023年1月27日現在）、こちらの名前でimportするのが良いです。修正を投げようとも思いましたが関連する他リポジトリも全て変わっていないので、そのうち修正されるのを待とうと思います。\n切断周りの対応はちゃんと書いていません。\nチャットメッセージはUnidirectional Streamでやりとりしています。一部で話題のTwitchのWarpもUnidirectionalで実装されているようです。webtransport-goはDatagramはまだ未対応のようです。\nWebTransport自体はコネクションさえ確立されれば後はQUICなので、どうしてもブラウザ上でやりたいことがなければ普通にQUICについて調査することをフォーカスしたほうが良さそうです。ブラウザならではで想定できそうなのはやはりWarpのような動画配信でしょうか。WebCodecsと組み合わせて実装するようです。\n参考記事\nqiita.com","summary":"github.com 突然興味が出てきて書きましたが特に実用性はありません。webtransport-goがそれなりに使えるのかどうか調べるために書いたものです。 webtransport-goは紆余曲折あって（？）quic-goに取り込まれたようですが、中のファイルがまだ github.com/marten-seemann/webtransport-go のままなので（2023年1月27日現在）、こちらの名前でimportするのが良いです。修正を投げようとも思いましたが関連する他リポジトリも全て変わっていないので、そのうち修正されるのを待とうと思います。 切断周りの対応はちゃんと書いていませ…","id":"hatenablog://entry/4207112889957967595","isoDate":"2023-01-27T08:30:00.000Z"},{"title":"2022年の仕事と近況","link":"https://nazo.hatenablog.com/entry/2022-works","pubDate":"2022-12-29T03:00:00.000Z","author":"nazone","content":"\u003cul\u003e\n\u003cli\u003e2021年 : \u003ca href=\"https://nazo.hatenablog.com/entry/2021-works\"\u003ehttps://nazo.hatenablog.com/entry/2021-works\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e2020年 : \u003ca href=\"https://nazo.hatenablog.com/entry/2020-works\"\u003ehttps://nazo.hatenablog.com/entry/2020-works\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e2019年 : \u003ca href=\"https://nazo.hatenablog.com/entry/goodbye-uuum\"\u003ehttps://nazo.hatenablog.com/entry/goodbye-uuum\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1 id=\"2022年の仕事\"\u003e2022年の仕事\u003c/h1\u003e\n\n\u003cp\u003e去年からの続きの仕事のみで、大きく話せるようなことは特にありません。仕事をしていないわけではないですが、一度区切りをつけて来年からは大幅縮小になる予定です。\u003c/p\u003e\n\n\u003ch1 id=\"近況\"\u003e近況\u003c/h1\u003e\n\n\u003cp\u003e2022年は引っ越したりしていました。一応首都圏ではあるものの、通勤することを完全に捨てた場所にいます。その代わり仕事部屋を手に入れたので、リモートワークで会議が頻繁に発生することにも対応できることになりました。\u003c/p\u003e\n\n\u003cp\u003e去年今年と辛いことが続いていますが、来年は本厄らしいのでもうだめかもしれません。がんばります。\u003c/p\u003e\n\n\u003ch1 id=\"まとめ\"\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e今後はブログを中心に情報発信を行っていこうと思います。技術的な話は \u003ca href=\"https://zenn.dev/nazo\"\u003eZenn\u003c/a\u003e にも転載していますので、技術的な話のみ読みたい方はそちらをフォローしてください。\u003c/p\u003e\n\n\u003cp\u003e来年からの予定は今のところ未定なので、週２〜３くらいでの案件を引き続き募集しております。詳しくは\n\u003ca href=\"https://nazo.dev/\"\u003ehttps://nazo.dev/\u003c/a\u003e をご覧下さい。\u003c/p\u003e\n","contentSnippet":"2021年 : https://nazo.hatenablog.com/entry/2021-works\n2020年 : https://nazo.hatenablog.com/entry/2020-works\n2019年 : https://nazo.hatenablog.com/entry/goodbye-uuum\n2022年の仕事\n去年からの続きの仕事のみで、大きく話せるようなことは特にありません。仕事をしていないわけではないですが、一度区切りをつけて来年からは大幅縮小になる予定です。\n近況\n2022年は引っ越したりしていました。一応首都圏ではあるものの、通勤することを完全に捨てた場所にいます。その代わり仕事部屋を手に入れたので、リモートワークで会議が頻繁に発生することにも対応できることになりました。\n去年今年と辛いことが続いていますが、来年は本厄らしいのでもうだめかもしれません。がんばります。\nまとめ\n今後はブログを中心に情報発信を行っていこうと思います。技術的な話は Zenn にも転載していますので、技術的な話のみ読みたい方はそちらをフォローしてください。\n来年からの予定は今のところ未定なので、週２〜３くらいでの案件を引き続き募集しております。詳しくは\nhttps://nazo.dev/ をご覧下さい。","summary":"2021年 : https://nazo.hatenablog.com/entry/2021-works 2020年 : https://nazo.hatenablog.com/entry/2020-works 2019年 : https://nazo.hatenablog.com/entry/goodbye-uuum 2022年の仕事 去年からの続きの仕事のみで、大きく話せるようなことは特にありません。仕事をしていないわけではないですが、一度区切りをつけて来年からは大幅縮小になる予定です。 近況 2022年は引っ越したりしていました。一応首都圏ではあるものの、通勤することを完全に捨てた場所に…","id":"hatenablog://entry/4207112889941404490","isoDate":"2022-12-29T03:00:00.000Z"},{"title":"最近の Terraform のディレクトリ構造の分け方","link":"https://nazo.hatenablog.com/entry/terraform-2022","pubDate":"2022-12-23T03:00:00.000Z","author":"nazone","content":"\u003ch1 id=\"概要\"\u003e概要\u003c/h1\u003e\n\n\u003cp\u003emodules / envs / apps で\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8\"\u003eディレクト\u003c/a\u003eリを切っています。\u003c/p\u003e\n\n\u003ch1 id=\"基礎知識-modules-と-envs\"\u003e基礎知識： modules と envs\u003c/h1\u003e\n\n\u003cp\u003e誰が言い出したのかはわかりませんが、modules と envs に分けるパターンはよく見かけます。\u003c/p\u003e\n\n\u003cp\u003emodules は文字通りモジュールを配置するところで、 envs はそれらを使う環境が入っているという感じです。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e.\n├── modules\n│   ├── vpc\n│   ├── app\n│   └── db\n└── envs\n    ├── production\n    └── staging\u003c/pre\u003e\n\n\n\u003cp\u003emodules の抽象度は、 \u003ca href=\"https://12factor.net/ja/backing-services\"\u003e12 factor app の バックエンドサービス\u003c/a\u003e くらいのイメージを持っていればいいのではないかと思います。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/VPC\"\u003eVPC\u003c/a\u003e みたいな基盤は特殊として、それ以外は「外しても使える程度」を意識するのが良いと思います。\u003c/p\u003e\n\n\u003cp\u003e一般的に envs で書かれる tf は、modules を呼び出すだけにしておくのが良いと思います。直接リソースを書くのは最終手段です。\u003c/p\u003e\n\n\u003ch1 id=\"modules-と-envs-はわかるけど-apps-って何\"\u003emodules と envs はわかるけど apps って何？\u003c/h1\u003e\n\n\u003cp\u003e全環境で \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/VPC\"\u003eVPC\u003c/a\u003e も DB も分けるなら必要ないですが、「複数のアプリで同一の DB を参照したい」というケースは多々あります。進捗が別々の環境を同時に作りたい場合などです。また、費用を節約するために同一の DB リソースを共有するという場合もあります。\u003c/p\u003e\n\n\u003cp\u003eそのような状況を考えた時、「土台のバックエンドサービスと、自分で書いたアプリケーションは別の扱いにしたほうがいいのでは」となりました。この「土台のバックエンドサービス」が「envs」で、「自分で書いたアプリケーション」が「apps」になります。\u003c/p\u003e\n\n\u003cp\u003e「envs」は、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/VPC\"\u003eVPC\u003c/a\u003e や DB などがまとまったもので、「apps」はデプロイ単位で分けることになります。これにより、１つの \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/VPC\"\u003eVPC\u003c/a\u003e や DB に、複数のアプリケーションを同居させることが簡単になります。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e.\n├── modules\n│   ├── vpc\n│   ├── app\n│   └── db\n├── apps\n│   ├── staging\n│   ├── production\n│   └── featurexxxx\n└── envs\n    ├── production\n    └── staging\u003c/pre\u003e\n\n\n\u003cp\u003e「envs」以下より「apps」以下のほうが必ず数が多くなります。また、「apps」は「envs」の設定に依存しますが、逆の依存は必ず存在しないようにします。\u003c/p\u003e\n","contentSnippet":"概要\nmodules / envs / apps でディレクトリを切っています。\n基礎知識： modules と envs\n誰が言い出したのかはわかりませんが、modules と envs に分けるパターンはよく見かけます。\nmodules は文字通りモジュールを配置するところで、 envs はそれらを使う環境が入っているという感じです。\n.\n├── modules\n│   ├── vpc\n│   ├── app\n│   └── db\n└── envs\n    ├── production\n    └── staging\nmodules の抽象度は、 12 factor app の バックエンドサービス くらいのイメージを持っていればいいのではないかと思います。VPC みたいな基盤は特殊として、それ以外は「外しても使える程度」を意識するのが良いと思います。\n一般的に envs で書かれる tf は、modules を呼び出すだけにしておくのが良いと思います。直接リソースを書くのは最終手段です。\nmodules と envs はわかるけど apps って何？\n全環境で VPC も DB も分けるなら必要ないですが、「複数のアプリで同一の DB を参照したい」というケースは多々あります。進捗が別々の環境を同時に作りたい場合などです。また、費用を節約するために同一の DB リソースを共有するという場合もあります。\nそのような状況を考えた時、「土台のバックエンドサービスと、自分で書いたアプリケーションは別の扱いにしたほうがいいのでは」となりました。この「土台のバックエンドサービス」が「envs」で、「自分で書いたアプリケーション」が「apps」になります。\n「envs」は、VPC や DB などがまとまったもので、「apps」はデプロイ単位で分けることになります。これにより、１つの VPC や DB に、複数のアプリケーションを同居させることが簡単になります。\n.\n├── modules\n│   ├── vpc\n│   ├── app\n│   └── db\n├── apps\n│   ├── staging\n│   ├── production\n│   └── featurexxxx\n└── envs\n    ├── production\n    └── staging\n「envs」以下より「apps」以下のほうが必ず数が多くなります。また、「apps」は「envs」の設定に依存しますが、逆の依存は必ず存在しないようにします。","summary":"最近の Terraform のディレクトリ構造の分け方について解説します。","id":"hatenablog://entry/4207112889947280382","isoDate":"2022-12-23T03:00:00.000Z"},{"title":"git の pre-commit hook はなるべく使わないほうがいいのでは","link":"https://nazo.hatenablog.com/entry/dont-use-pre-commit-hook","pubDate":"2022-12-12T03:00:00.000Z","author":"nazone","content":"\u003cp\u003egit に pre-commit hook という、コミット直前に何かのプログラムを実行する機能があります。これを用いて lint や test を実行したりすることがありますが、この利用は極力避けたほうが良いのではと考えています。\u003c/p\u003e\n\n\u003ch1 id=\"なぜ\"\u003eなぜ？\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e個人の環境で実行した結果は信用できない\u003c/li\u003e\n\u003cli\u003eローカルコンピューターで待たせてはいけない\u003c/li\u003e\n\u003cli\u003epre-commit の挙動や中断などで動作が怪しくなることがある\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1 id=\"個人の環境で実行した結果は信用できない\"\u003e個人の環境で実行した結果は信用できない\u003c/h1\u003e\n\n\u003cp\u003e全員が完全に同じ環境で pre-commit hook を実行しているかは誰にもわかりません。言語やライブラリのバージョンに差がある可能性もあります。また、hook をスキップする方法もあります。\u003c/p\u003e\n\n\u003cp\u003eそれだけを信用してチェックを行ったと判断するのは危険であるため、CI で実行することを優先すべきです。\u003c/p\u003e\n\n\u003ch1 id=\"ローカルコンピューターで待たせてはいけない\"\u003eローカルコンピューターで待たせてはいけない\u003c/h1\u003e\n\n\u003cp\u003eチェック項目が増えると、hook の実行時間も増えます。\u003c/p\u003e\n\n\u003cp\u003eあくまで hook で行う処理の大半はガードレールなので、ちゃんと書いていれば一発通過するはずで、そのために毎回各自が待たされるのは無駄です。\u003c/p\u003e\n\n\u003cp\u003eチェック内容に自信がなければコミット前に手動実行すると思いますので、それでチェックが通っても pre-commit hook は実行され、さらに時間をかけてしまいます。\u003c/p\u003e\n\n\u003cp\u003eチェックに時間がかかりすぎるようになると、チェックを迂回するための策を考えてしまう可能性があります。\u003c/p\u003e\n\n\u003cp\u003eチェックが通る前提でコードを書き、素早く push して開発を効率化しましょう。\u003c/p\u003e\n\n\u003ch1 id=\"pre-commit-の挙動や中断などで動作が怪しくなることがある\"\u003epre-commit の挙動や中断などで動作が怪しくなることがある\u003c/h1\u003e\n\n\u003cp\u003eライブラリの更新などで pre-commit hook がアップデートされた場合などや、極端にリビジョンに差があって pre-commit の挙動に差があるブランチに切り替えた場合などに、pre-commit \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eとライブラリが一致していない等でおかしな挙動をすることがあります。他にも様々な理由で予期せぬ結果を起こすことがあります。\u003c/p\u003e\n\n\u003cp\u003egit commit に機能を追加してしまうことで、 git commit 時に git commit 以外のことを考える必要が出てきます。\u003c/p\u003e\n\n\u003ch1 id=\"そんなこと言っても変なコードが-push-されたらどうするの\"\u003eそんなこと言っても変なコードが push されたらどうするの？\u003c/h1\u003e\n\n\u003cp\u003eCI で防げばいいです。そのための CI です。\u003c/p\u003e\n\n\u003cp\u003eCI と同等の動作を「任意で」ローカルで実行できることは必要ですが、最終判断はあくまで CI にやらせましょう。\u003c/p\u003e\n\n\u003cp\u003eCI で必ずチェックすることで、変なコードがマージされるのを確実に防ぐことができます。また、常に同じ環境である CI に実行させることによって、環境ごとで結果に違いが出るといった現象も防ぐことができます。\u003c/p\u003e\n\n\u003ch1 id=\"その割には有名なライブラリたくさんあるし使っている人もいっぱいいるよ\"\u003eその割には有名なライブラリたくさんあるし使っている人もいっぱいいるよ！\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://rubygems.org/gems/pre-commit/versions/0.31.0?locale=ja\"\u003eRuby の pre-commit gem\u003c/a\u003e や nodejs の \u003ca href=\"https://github.com/typicode/husky\"\u003eHusky\u003c/a\u003e + \u003ca href=\"https://github.com/okonet/lint-staged\"\u003elint-staged\u003c/a\u003e などがあり、特に nodejs 界隈ではボイラープレートに組み込まれていたりします。\u003c/p\u003e\n\n\u003cp\u003eどれも有名かつ人気があるので使うべきかと思いますが、「出来がよく実用しても問題ないから人気である」と「必ず使う必要がある」は全く関係がありません。これまでの理由により、基本的には使う必要はないものです。\u003c/p\u003e\n\n\u003cp\u003eどうしても忘れっぽい人やチェックする習慣がない初学者は任意で有効化して利用する、というのはありかもしれませんが、強制するものではないと思います。\u003c/p\u003e\n\n\u003cp\u003eリモートに push されること自体が望ましくないものを防ぐ場合は使って良いと思います。例えば \u003ca href=\"https://github.com/awslabs/git-secrets\"\u003egit-secrets\u003c/a\u003e のようなものです。一般的な lint エラーやテストの失敗といったものはリモートに push されても何の問題もありません。誰もマージできないだけです。\u003c/p\u003e\n\n\u003ch1 id=\"まとめ\"\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eよほどの理由がない限り、pre-commit hookは使わないほうがいいと思ったほうが良いでしょう。各自の判断で手動実行 + 必ず CI でチェック、でほとんどの場合は十分です。絶対に使うなというわけではないですが、なぜ pre-commit hook を使う必要があるのか、何のために使うのかをよく考えて利用しましょう。\u003c/p\u003e\n\n\u003ch1 id=\"参考\"\u003e参考\u003c/h1\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.thoughtworks.com%2Finsights%2Fblog%2Fpre-commit-don-t-git-hooked\" title=\"Pre-commit: Don’t git hooked!\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://www.thoughtworks.com/insights/blog/pre-commit-don-t-git-hooked\"\u003ewww.thoughtworks.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n","contentSnippet":"git に pre-commit hook という、コミット直前に何かのプログラムを実行する機能があります。これを用いて lint や test を実行したりすることがありますが、この利用は極力避けたほうが良いのではと考えています。\nなぜ？\n個人の環境で実行した結果は信用できない\nローカルコンピューターで待たせてはいけない\npre-commit の挙動や中断などで動作が怪しくなることがある\n個人の環境で実行した結果は信用できない\n全員が完全に同じ環境で pre-commit hook を実行しているかは誰にもわかりません。言語やライブラリのバージョンに差がある可能性もあります。また、hook をスキップする方法もあります。\nそれだけを信用してチェックを行ったと判断するのは危険であるため、CI で実行することを優先すべきです。\nローカルコンピューターで待たせてはいけない\nチェック項目が増えると、hook の実行時間も増えます。\nあくまで hook で行う処理の大半はガードレールなので、ちゃんと書いていれば一発通過するはずで、そのために毎回各自が待たされるのは無駄です。\nチェック内容に自信がなければコミット前に手動実行すると思いますので、それでチェックが通っても pre-commit hook は実行され、さらに時間をかけてしまいます。\nチェックに時間がかかりすぎるようになると、チェックを迂回するための策を考えてしまう可能性があります。\nチェックが通る前提でコードを書き、素早く push して開発を効率化しましょう。\npre-commit の挙動や中断などで動作が怪しくなることがある\nライブラリの更新などで pre-commit hook がアップデートされた場合などや、極端にリビジョンに差があって pre-commit の挙動に差があるブランチに切り替えた場合などに、pre-commit スクリプトとライブラリが一致していない等でおかしな挙動をすることがあります。他にも様々な理由で予期せぬ結果を起こすことがあります。\ngit commit に機能を追加してしまうことで、 git commit 時に git commit 以外のことを考える必要が出てきます。\nそんなこと言っても変なコードが push されたらどうするの？\nCI で防げばいいです。そのための CI です。\nCI と同等の動作を「任意で」ローカルで実行できることは必要ですが、最終判断はあくまで CI にやらせましょう。\nCI で必ずチェックすることで、変なコードがマージされるのを確実に防ぐことができます。また、常に同じ環境である CI に実行させることによって、環境ごとで結果に違いが出るといった現象も防ぐことができます。\nその割には有名なライブラリたくさんあるし使っている人もいっぱいいるよ！\nRuby の pre-commit gem や nodejs の Husky + lint-staged などがあり、特に nodejs 界隈ではボイラープレートに組み込まれていたりします。\nどれも有名かつ人気があるので使うべきかと思いますが、「出来がよく実用しても問題ないから人気である」と「必ず使う必要がある」は全く関係がありません。これまでの理由により、基本的には使う必要はないものです。\nどうしても忘れっぽい人やチェックする習慣がない初学者は任意で有効化して利用する、というのはありかもしれませんが、強制するものではないと思います。\nリモートに push されること自体が望ましくないものを防ぐ場合は使って良いと思います。例えば git-secrets のようなものです。一般的な lint エラーやテストの失敗といったものはリモートに push されても何の問題もありません。誰もマージできないだけです。\nまとめ\nよほどの理由がない限り、pre-commit hookは使わないほうがいいと思ったほうが良いでしょう。各自の判断で手動実行 + 必ず CI でチェック、でほとんどの場合は十分です。絶対に使うなというわけではないですが、なぜ pre-commit hook を使う必要があるのか、何のために使うのかをよく考えて利用しましょう。\n参考\nwww.thoughtworks.com","summary":"git に pre-commit hook という、コミット直前に何かのプログラムを実行する機能があります。これを用いて lint や test を実行したりすることがありますが、この利用は控えたほうが良いと考えています。ここではその詳しい理由を説明します。","id":"hatenablog://entry/4207112889943282748","isoDate":"2022-12-12T03:00:00.000Z"},{"title":"2021年の仕事まとめ","link":"https://nazo.hatenablog.com/entry/2021-works","pubDate":"2021-12-28T03:00:00.000Z","author":"nazone","content":"\u003cul\u003e\n\u003cli\u003e2020年 : \u003ca href=\"https://nazo.hatenablog.com/entry/2020-works\"\u003ehttps://nazo.hatenablog.com/entry/2020-works\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e2019年 : \u003ca href=\"https://nazo.hatenablog.com/entry/goodbye-uuum\"\u003ehttps://nazo.hatenablog.com/entry/goodbye-uuum\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1\u003eGo による \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e サーバーと React による管理画面開発\u003c/h1\u003e\n\n\u003cp\u003eGo で gRPC サーバーを作りつつ、 React と gqlgen で 管理画面を作るというような内容でした。\u003c/p\u003e\n\n\u003cp\u003e都合により短期でしか関われなかったのですが、あまりお目にかかれない環境での開発で非常に楽しい経験をさせて頂きました。\u003c/p\u003e\n\n\u003ch1\u003e株式会社ハグカム　様\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.global-crown.com/\"\u003eGLOBAL CROWN\u003c/a\u003e という子ども向け英会話サービスを提供しております。\u003ca href=\"https://prtimes.jp/main/html/rd/p/000000004.000019731.html\"\u003e今年初めに資金調達も行っており\u003c/a\u003e 、絶賛成長中のサービスになっております。\u003c/p\u003e\n\n\u003cp\u003e私も少しだけお世話になっており、主にコア\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3\"\u003eドメイン\u003c/a\u003eからは少し距離を置いたものを中心に、以下のような内容を行っておりました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eGCE で動いていたインフラを Cloud Run に移行\u003c/li\u003e\n\u003cli\u003eインフラの Terraform 化\u003c/li\u003e\n\u003cli\u003elinter を整備してコード品質を上げる\u003c/li\u003e\n\u003cli\u003eCI / CD の整備\u003c/li\u003e\n\u003cli\u003e負荷チューニング\u003c/li\u003e\n\u003cli\u003eDocker 開発環境の整備\u003c/li\u003e\n\u003cli\u003e言語や\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF\"\u003eフレームワーク\u003c/a\u003eのアップグレード\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eサーバーサイドの言語としては \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/PHP\"\u003ePHP\u003c/a\u003e と \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e を利用しており、久々に長期で \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/PHP\"\u003ePHP\u003c/a\u003e を触っていました。\u003c/p\u003e\n\n\u003cp\u003eまた、\u003ca href=\"https://www.hugcome.co.jp/\"\u003eコーポレートサイト\u003c/a\u003e を Next.js + Netlify で SSG 化したり、未公開の内容についての対応なども行っておりました。\u003c/p\u003e\n\n\u003cp\u003e今年は仕事以外のところでいろいろあったのですが、ハグカム様にはかなり融通を利かせて頂いて助かりました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e エンジニアや Flutter エンジニアなどを積極的に採用中ですので、興味があれば以下から応募するか私までご連絡下さい。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.hugcome.co.jp%2Fengineer\" title=\"ソフトウェアエンジニア | 株式会社ハグカム\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://www.hugcome.co.jp/engineer\"\u003ewww.hugcome.co.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.green-japan.com%2Fcompany%2F8109\" title=\"株式会社 ハグカム | IT/Web業界への転職ならGreen(グリーン)\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://www.green-japan.com/company/8109\"\u003ewww.green-japan.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch1\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e今年はプライベートで良くないことが続く年でしたが、来年後半からはまた良い状況が生まれてくるはずなので、そこから活動を増やしていきたいと考えています。\u003c/p\u003e\n\n\u003cp\u003e引き続きお仕事を募集しております。詳細は \u003ca href=\"https://nazo.dev/profile\"\u003ehttps://nazo.dev/profile\u003c/a\u003e をご覧下さい。\u003c/p\u003e\n","contentSnippet":"2020年 : https://nazo.hatenablog.com/entry/2020-works\n2019年 : https://nazo.hatenablog.com/entry/goodbye-uuum\nGo による API サーバーと React による管理画面開発\nGo で gRPC サーバーを作りつつ、 React と gqlgen で 管理画面を作るというような内容でした。\n都合により短期でしか関われなかったのですが、あまりお目にかかれない環境での開発で非常に楽しい経験をさせて頂きました。\n株式会社ハグカム　様\nGLOBAL CROWN という子ども向け英会話サービスを提供しております。今年初めに資金調達も行っており 、絶賛成長中のサービスになっております。\n私も少しだけお世話になっており、主にコアドメインからは少し距離を置いたものを中心に、以下のような内容を行っておりました。\nGCE で動いていたインフラを Cloud Run に移行\nインフラの Terraform 化\nlinter を整備してコード品質を上げる\nCI / CD の整備\n負荷チューニング\nDocker 開発環境の整備\n言語やフレームワークのアップグレード\nサーバーサイドの言語としては PHP と Ruby を利用しており、久々に長期で PHP を触っていました。\nまた、コーポレートサイト を Next.js + Netlify で SSG 化したり、未公開の内容についての対応なども行っておりました。\n今年は仕事以外のところでいろいろあったのですが、ハグカム様にはかなり融通を利かせて頂いて助かりました。\nRails エンジニアや Flutter エンジニアなどを積極的に採用中ですので、興味があれば以下から応募するか私までご連絡下さい。\nwww.hugcome.co.jp\nwww.green-japan.com\nまとめ\n今年はプライベートで良くないことが続く年でしたが、来年後半からはまた良い状況が生まれてくるはずなので、そこから活動を増やしていきたいと考えています。\n引き続きお仕事を募集しております。詳細は https://nazo.dev/profile をご覧下さい。","summary":"2020年 : https://nazo.hatenablog.com/entry/2020-works 2019年 : https://nazo.hatenablog.com/entry/goodbye-uuum Go による API サーバーと React による管理画面開発 Go で gRPC サーバーを作りつつ、 React と gqlgen で 管理画面を作るというような内容でした。 都合により短期でしか関われなかったのですが、あまりお目にかかれない環境での開発で非常に楽しい経験をさせて頂きました。 株式会社ハグカム 様 GLOBAL CROWN という子ども向け英会話サービスを提供…","id":"hatenablog://entry/26006613716445536","isoDate":"2021-12-28T03:00:00.000Z"},{"title":"ent ( entgo.io/ent ) で ULID を使う","link":"https://nazo.hatenablog.com/entry/entgo-ulid","pubDate":"2021-03-09T03:00:00.000Z","author":"nazone","content":"\u003cp\u003eent では UUID 型がデフォルトでサポートされているのですが、それとは別に \u003ca href=\"https://github.com/ulid/spec\"\u003eULID\u003c/a\u003e を使う方法を解説します。\u003c/p\u003e\n\n\u003cp\u003eULID の実装は \u003ca href=\"https://github.com/oklog/ulid\"\u003ehttps://github.com/oklog/ulid\u003c/a\u003e を使用します。\u003c/p\u003e\n\n\u003cp\u003eent の UUID 型は、\u003ca href=\"https://golang.org/pkg/database/sql/driver/#Valuer\"\u003edriver.Valuer\u003c/a\u003e Interface を利用して値を取得しますが、 oklog/ulid の \u003ccode\u003eValue()\u003c/code\u003e の実装がバイナリを返却するようになっているため、このままでは可読性が悪いです。 \u003ccode\u003eValue()\u003c/code\u003e が String を返すようにした ULID 型を新たに定義するのが良いでしょう。そのようにすると、他の interface も実装する必要があります。\u003c/p\u003e\n\n\u003cp\u003e結論から言うと \u003ca href=\"https://github.com/ent/contrib/blob/6623819401500db45747a2419172963217cef619/entgql/internal/todopulid/ent/schema/pulid/pulid.go\"\u003ehttps://github.com/ent/contrib/blob/6623819401500db45747a2419172963217cef619/entgql/internal/todopulid/ent/schema/pulid/pulid.go\u003c/a\u003e にそのものの実装があります\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003e。この実装はライブラリ化されているものではない（ internal ）ので、そのままコピペして利用するのが良いでしょう。\u003c/p\u003e\n\n\u003cp\u003e使用する場合には以下のようになります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-go\" data-lang=\"go\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e// Fields of the User.\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003efunc\u003c/span\u003e (User) Fields() []ent.Field {\n    \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e []ent.Field{\n        field.String(\u003cspan class=\"synConstant\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e).\n            GoType(pulid.ID(\u003cspan class=\"synConstant\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e)).\n            DefaultFunc(\u003cspan class=\"synType\"\u003efunc\u003c/span\u003e() pulid.ID { \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e pulid.MustNew(\u003cspan class=\"synConstant\"\u003e\u0026quot;US\u0026quot;\u003c/span\u003e) }),\n        field.Int(\u003cspan class=\"synConstant\"\u003e\u0026quot;age\u0026quot;\u003c/span\u003e).Positive(),\n        field.String(\u003cspan class=\"synConstant\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e).Default(\u003cspan class=\"synConstant\"\u003e\u0026quot;unknown\u0026quot;\u003c/span\u003e),\n    }\n}\n\u003c/pre\u003e\n\n\n\u003cp\u003eprefixが不要な場合はprefixの部分を削ってしまうのが良いかと思います。\u003c/p\u003e\n\n\u003cp\u003eこのままの実装でもう少し手軽に書きたい場合は、同\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\"\u003eリポジトリ\u003c/a\u003eに \u003ca href=\"https://github.com/ent/contrib/blob/6623819401500db45747a2419172963217cef619/entgql/internal/todopulid/ent/schema/pulid/mixin.go\"\u003emixin\u003c/a\u003e が存在しますので、これを持ち出すと良いと思います。\u003c/p\u003e\n\n\u003cp\u003eent は各フィールドを固有の型にできますので、例えば上記例で ID を \u003ccode\u003eUserID\u003c/code\u003e 型にしたい場合は以下のようになります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-go\" data-lang=\"go\" data-unlink\u003e\u003cspan class=\"synStatement\"\u003etype\u003c/span\u003e UserID pulid.ID\n\n\u003cspan class=\"synComment\"\u003e// Fields of the User.\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003efunc\u003c/span\u003e (User) Fields() []ent.Field {\n    \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e []ent.Field{\n        field.String(\u003cspan class=\"synConstant\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e).\n            GoType(UserID(\u003cspan class=\"synConstant\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e)).\n            DefaultFunc(\u003cspan class=\"synType\"\u003efunc\u003c/span\u003e() UserID { \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e UserID(pulid.MustNew(\u003cspan class=\"synConstant\"\u003e\u0026quot;US\u0026quot;\u003c/span\u003e)) }),\n        field.Int(\u003cspan class=\"synConstant\"\u003e\u0026quot;age\u0026quot;\u003c/span\u003e).Positive(),\n        field.String(\u003cspan class=\"synConstant\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e).Default(\u003cspan class=\"synConstant\"\u003e\u0026quot;unknown\u0026quot;\u003c/span\u003e),\n    }\n}\n\u003c/pre\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/tmc/pulid\"\u003ehttps://github.com/tmc/pulid\u003c/a\u003e のように見えるのですが、こちらは \u003ccode\u003eValue()\u003c/code\u003e はバイナリを返すようです。\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"ent では UUID 型がデフォルトでサポートされているのですが、それとは別に ULID を使う方法を解説します。\nULID の実装は https://github.com/oklog/ulid を使用します。\nent の UUID 型は、driver.Valuer Interface を利用して値を取得しますが、 oklog/ulid の Value() の実装がバイナリを返却するようになっているため、このままでは可読性が悪いです。 Value() が String を返すようにした ULID 型を新たに定義するのが良いでしょう。そのようにすると、他の interface も実装する必要があります。\n結論から言うと https://github.com/ent/contrib/blob/6623819401500db45747a2419172963217cef619/entgql/internal/todopulid/ent/schema/pulid/pulid.go にそのものの実装があります1。この実装はライブラリ化されているものではない（ internal ）ので、そのままコピペして利用するのが良いでしょう。\n使用する場合には以下のようになります。\n// Fields of the User.\nfunc (User) Fields() []ent.Field {\n    return []ent.Field{\n        field.String(\"id\").\n            GoType(pulid.ID(\"\")).\n            DefaultFunc(func() pulid.ID { return pulid.MustNew(\"US\") }),\n        field.Int(\"age\").Positive(),\n        field.String(\"name\").Default(\"unknown\"),\n    }\n}\n\n\n\nprefixが不要な場合はprefixの部分を削ってしまうのが良いかと思います。\nこのままの実装でもう少し手軽に書きたい場合は、同リポジトリに mixin が存在しますので、これを持ち出すと良いと思います。\nent は各フィールドを固有の型にできますので、例えば上記例で ID を UserID 型にしたい場合は以下のようになります。\ntype UserID pulid.ID\n\n// Fields of the User.\nfunc (User) Fields() []ent.Field {\n    return []ent.Field{\n        field.String(\"id\").\n            GoType(UserID(\"\")).\n            DefaultFunc(func() UserID { return UserID(pulid.MustNew(\"US\")) }),\n        field.Int(\"age\").Positive(),\n        field.String(\"name\").Default(\"unknown\"),\n    }\n}\n\n\n\n\n\n\nhttps://github.com/tmc/pulid のように見えるのですが、こちらは Value() はバイナリを返すようです。↩","summary":"ent では UUID 型がデフォルトでサポートされているのですが、それとは別に ULID を使う方法を解説します。 ULID の実装は https://github.com/oklog/ulid を使用します。 ent の UUID 型は、driver.Valuer Interface を利用して値を取得しますが、 oklog/ulid の Value() の実装がバイナリを返却するようになっているため、このままでは可読性が悪いです。 Value() が String を返すようにした ULID 型を新たに定義するのが良いでしょう。そのようにすると、他の interface も実装する必要が…","id":"hatenablog://entry/26006613701103637","isoDate":"2021-03-09T03:00:00.000Z"},{"title":" Infrastructure as Codeは最初からやったほうがいい","link":"https://nazo.hatenablog.com/entry/iac-first","pubDate":"2021-03-08T03:00:00.000Z","author":"nazone","content":"\u003cp\u003e最近不慣れな \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GCP\"\u003eGCP\u003c/a\u003e を触ることがあったのですが、最初から Terraform で書くようにしたほうが楽だったので、それについて解説しようと思います。\u003c/p\u003e\n\n\u003ch1\u003eWeb のコンソールを触るのが怖い\u003c/h1\u003e\n\n\u003cp\u003e他のサービスが同居しているアカウントでインフラを操作すると、他のサービスに影響を与えてしまうのでは…という不安があります。関係のないサービスは別アカウントにするというのがベストプ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E9%A5%AF\"\u003eラク\u003c/a\u003eティスですが、様々な事情によりそれができない場合もあります。\u003c/p\u003e\n\n\u003cp\u003e最初から IaC で触っていれば、コードで生成したインフラ以外を触ることがなく、削除する時も間違えることがなく削除することができ、何度も作り直して試すことが容易になります。\u003c/p\u003e\n\n\u003ch1\u003e手順を覚えられない\u003c/h1\u003e\n\n\u003cp\u003eWebのコンソールでも、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3\"\u003eコマンドライン\u003c/a\u003eツールでも同様ですが、作業した内容を記録しておく必要があります。記録していない場合、同じ環境を再現することができません。\u003c/p\u003e\n\n\u003cp\u003e最初からコード化をしていれば、手順を覚えておく必要もありません。\u003c/p\u003e\n\n\u003ch1\u003e必要な依存関係を最初から教えてくれる\u003c/h1\u003e\n\n\u003cp\u003eコンソールで触っていると、どのサービスとどのサービスが繋がっているかというのがわかりにくいですが、例えば Terraform では必須パラメーターとして存在していることが多く、依存関係を設定していないと適用する前にエラーになってくれたりするので迷うことが少なくなります。\u003c/p\u003e\n\n\u003cp\u003eまた、サンプルで組み合わせた書き方が充実していたり、組み合わせサンプルのコードが用意されていたりするので、手順を読んで試行錯誤するより確実にインフラ構築をすることができます。\u003c/p\u003e\n\n\u003cp\u003e特に \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\"\u003eAWS\u003c/a\u003e で CDK や Copilot といったツールを使っておくと、複雑なサービス間の依存関係を考えることがなく構成を立ち上げることができます。\u003c/p\u003e\n\n\u003ch1\u003e設定できるパラメーターがツールのドキュメントに網羅されている\u003c/h1\u003e\n\n\u003cp\u003e依存関係と同様に、全てのパラメーターがドキュメントに書かれているので、「このリソースではこれが設定できる」とか「このリソースはこの設定をすることができない」というのがドキュメントを読むだけで把握することができます。\u003c/p\u003e\n\n\u003cp\u003eただし \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GCP\"\u003eGCP\u003c/a\u003e の Cloud Run のような\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF\"\u003eメタデータ\u003c/a\u003eでパラメーターを指定するような類のものの場合や、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\"\u003eAWS\u003c/a\u003e RDS のパラメーターグループのような任意のものを指定するようなものはドキュメントには書かれていないので、そこはオフィシャルのドキュメントやコンソールの画面を併せて読む必要があります。\u003c/p\u003e\n\n\u003ch1\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eコンソールで試行錯誤するより、最初からコードで書いて試行錯誤したほうが良いことが多いです。手作業を後からコード化するのは二度手間にもなるので、学習目的とかでない限りは最初からコードを書きましょう。\u003c/p\u003e\n\n\u003cp\u003eもちろんある程度の IaC ツールに慣れておく必要や、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9\"\u003eクラウド\u003c/a\u003eインフラの使い方に慣れておく必要がありますので、そこは基礎教養として素振りしておきましょう。\u003c/p\u003e\n","contentSnippet":"最近不慣れな GCP を触ることがあったのですが、最初から Terraform で書くようにしたほうが楽だったので、それについて解説しようと思います。\nWeb のコンソールを触るのが怖い\n他のサービスが同居しているアカウントでインフラを操作すると、他のサービスに影響を与えてしまうのでは…という不安があります。関係のないサービスは別アカウントにするというのがベストプラクティスですが、様々な事情によりそれができない場合もあります。\n最初から IaC で触っていれば、コードで生成したインフラ以外を触ることがなく、削除する時も間違えることがなく削除することができ、何度も作り直して試すことが容易になります。\n手順を覚えられない\nWebのコンソールでも、コマンドラインツールでも同様ですが、作業した内容を記録しておく必要があります。記録していない場合、同じ環境を再現することができません。\n最初からコード化をしていれば、手順を覚えておく必要もありません。\n必要な依存関係を最初から教えてくれる\nコンソールで触っていると、どのサービスとどのサービスが繋がっているかというのがわかりにくいですが、例えば Terraform では必須パラメーターとして存在していることが多く、依存関係を設定していないと適用する前にエラーになってくれたりするので迷うことが少なくなります。\nまた、サンプルで組み合わせた書き方が充実していたり、組み合わせサンプルのコードが用意されていたりするので、手順を読んで試行錯誤するより確実にインフラ構築をすることができます。\n特に AWS で CDK や Copilot といったツールを使っておくと、複雑なサービス間の依存関係を考えることがなく構成を立ち上げることができます。\n設定できるパラメーターがツールのドキュメントに網羅されている\n依存関係と同様に、全てのパラメーターがドキュメントに書かれているので、「このリソースではこれが設定できる」とか「このリソースはこの設定をすることができない」というのがドキュメントを読むだけで把握することができます。\nただし GCP の Cloud Run のようなメタデータでパラメーターを指定するような類のものの場合や、AWS RDS のパラメーターグループのような任意のものを指定するようなものはドキュメントには書かれていないので、そこはオフィシャルのドキュメントやコンソールの画面を併せて読む必要があります。\nまとめ\nコンソールで試行錯誤するより、最初からコードで書いて試行錯誤したほうが良いことが多いです。手作業を後からコード化するのは二度手間にもなるので、学習目的とかでない限りは最初からコードを書きましょう。\nもちろんある程度の IaC ツールに慣れておく必要や、クラウドインフラの使い方に慣れておく必要がありますので、そこは基礎教養として素振りしておきましょう。","summary":"最近不慣れな GCP を触ることがあったのですが、最初から Terraform で書くようにしたほうが楽だったので、それについて解説しようと思います。 Web のコンソールを触るのが怖い 他のサービスが同居しているアカウントでインフラを操作すると、他のサービスに影響を与えてしまうのでは…という不安があります。関係のないサービスは別アカウントにするというのがベストプラクティスですが、様々な事情によりそれができない場合もあります。 最初から IaC で触っていれば、コードで生成したインフラ以外を触ることがなく、削除する時も間違えることがなく削除することができ、何度も作り直して試すことが容易になりま…","id":"hatenablog://entry/26006613698278372","isoDate":"2021-03-08T03:00:00.000Z"},{"title":"Webエンジニアが新規でプロジェクトに入った時に確認すること","link":"https://nazo.hatenablog.com/entry/project-onboarding","pubDate":"2021-03-03T03:00:00.000Z","author":"nazone","content":"\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D5%A5%EA%A1%BC%A5%E9%A5%F3%A5%B9\"\u003eフリーランス\u003c/a\u003eとしてWebエンジニアをしておりますが、プロジェクトに新規に入った時にどういう点を確認しているのかをまとめておきたいと思います。\u003c/p\u003e\n\n\u003ch1\u003eプロジェクトの目標と直近の目標が問題ないか\u003c/h1\u003e\n\n\u003cp\u003eプロジェクトの最終目標（理想）はとにかく大きくあるべきで、一方で直近の目標は具体的かつ十分に実現可能なサイズになっているべきです。もちろんその間くらいの目標（いわゆる\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%EB%A5%B9%A5%C8%A1%BC%A5%F3\"\u003eマイルストーン\u003c/a\u003e）も存在しているはずです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D5%A5%EA%A1%BC%A5%E9%A5%F3%A5%B9\"\u003eフリーランス\u003c/a\u003eの立場だと目標そのものに直接口を出すことはないですが、直近の目標が大きすぎると手を動かす時に困ってしまいますので、どこを削ぎ落とすのが良いのかこちらから提案することはあります。\u003c/p\u003e\n\n\u003ch1\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B3%AB%C8%AF%A5%D7%A5%ED%A5%BB%A5%B9\"\u003e開発プロセス\u003c/a\u003eが問題ないか\u003c/h1\u003e\n\n\u003cp\u003eプロジェクト参加直後はベロシティ（スプリント期間内の平均作業量）が不安定ですので、そこを許容できてちゃんと\u003c/p\u003e\n\n\u003cp\u003e個人的には常に\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%E9%A5%E0\"\u003eスクラム\u003c/a\u003eである必要はないと思いますが、マネージャーがいる場合はマネージャーが各メンバーのベロシティをちゃんと把握している、不在の場合は自分でベロシティが把握できていてタスクの見積もりができる、という状況になっていれば良いかと思います。「何だかよくわからないタスクをよくわからない期間で対応している」という状況では、前述の直近の目標の提案と同時に対処方法の提案を行うこともあります。\u003c/p\u003e\n\n\u003ch1\u003eデプロイが安定かつ高速に行えているか\u003c/h1\u003e\n\n\u003cp\u003eデプロイ速度は修正速度に直接繋がりますし、安定したデプロイができなければデプロイする単位が大きくなりがちですので、デプロイの安定性は最重要になります。\u003c/p\u003e\n\n\u003cp\u003e当然デプロイは完全自動化されていて、誰でも気軽に（承認フローなどは別として）デプロイできることが前提です。\u003c/p\u003e\n\n\u003cp\u003e誰でも簡単にデプロイできない場合、誰かにデプロイをお願いするというようなことが発生します。これでは自分と誰かの作業と、それを連絡する作業が増えてしまい、当然作業効率が悪くなってしまいますので、「誰でも」は重要です。「コマンド一発でデプロイできる」と見えても「（コマンドを実行する前にアクセスキーを取得して手元でデプロイ準備をして…）コマンド一発でデプロイできる」という場合がよくありますので、デプロイ環境自体が CI/CD 環境に移されていて手元の環境に影響せずデプロイできる（ CI サーバーが落ちていた場合は手元でも実行できる）というのが理想です。\u003c/p\u003e\n\n\u003ch1\u003eデプロイ方法が複雑になっていないか\u003c/h1\u003e\n\n\u003cp\u003e安定して高速にデプロイできていても、それを処理している方法が複雑だとメンテナンスの時に困ります。\u003c/p\u003e\n\n\u003cp\u003eメインのコードは綺麗にできてもインフラ系の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eは長くなりがちみたいなケースはよく見かけますが、インフラ系の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eもメインのコード同様に読みやすく構造化されているべきです。またインフラ系はツールが充実していることが多いので、なるべく自分で書く\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eは最小限にするのが良いと思います。\u003c/p\u003e\n\n\u003cp\u003eデプロイ自体が安定高速動作していればとりあえずは問題ないので、ここは後回しにすることも多いです。\u003c/p\u003e\n\n\u003ch1\u003eCI でコード品質が十分に守られているか\u003c/h1\u003e\n\n\u003cp\u003eCI の整備は後になればなるほど大変です。\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003eこれは CI で行うことの多くはコード品質そのものを一定の品質にする（ lint など）もののため、コード量が増えた後からそれを適用しようとすると修正点が膨大になるためです。\nlint はとにかくコード量が増える前に対処することが大事なので、ここは真っ先にチェックを行います。リリース前プロジェクトであればすぐ導入しますが、リリース後だと手を入れにくいので、最小限の設定にして少しずつ厳しくするという手法を採ります。\u003c/p\u003e\n\n\u003cp\u003e（自動）テストはそもそもテストが書けているかというのをまず確認しますが、その上で「テストに再現性があるか」「テストの内容が十分か」「\u003ca href=\"https://testing.googleblog.com/2010/12/test-sizes.html\"\u003eTest Sizes\u003c/a\u003e の分類が十分にできているか」といった内容を確認します。\u003c/p\u003e\n\n\u003cp\u003e数回に１回落ちるようなテストがある場合で、それがテストの実行順に影響している場合はテストの書き方そのものに問題がある場合がほとんどですので、その場合は削除してしまったほうが良いことが多いです。一方で、時間に関わるテストや、乱数や\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BF%F4%C3%CD%B7%D7%BB%BB\"\u003e数値計算\u003c/a\u003eの誤差などが影響するようなテストは、それ自体が重要なケースが多いのでちゃんと調査したほうがいいと思います。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://testing.googleblog.com/2010/12/test-sizes.html\"\u003eTest Sizes\u003c/a\u003e は、テストの分類を「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C3%B1%C2%CE%A5%C6%A5%B9%A5%C8\"\u003e単体テスト\u003c/a\u003e」「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B7%EB%B9%E7%A5%C6%A5%B9%A5%C8\"\u003e結合テスト\u003c/a\u003e」といった曖昧な呼び方ではなく、「我々のプロジェクトでは３段階の分類があり、それぞれのレベルではこうなっている」というものをプロジェクト固有で定義しようというものです。\u003c/p\u003e\n\n\u003ch1\u003eローカルでの環境構築が問題なく行えるか\u003c/h1\u003e\n\n\u003cp\u003e自分が受け入れられる側になるのですが、この時に受け入れ準備が十分にできているか確認し、できていない場合は改善しながら作業することになります。\u003c/p\u003e\n\n\u003cp\u003e一番ありがちなのは環境構築手順が整備されていないということで、これは自分がそのまま作業するのですぐわかります。\u003c/p\u003e\n\n\u003cp\u003eローカルの開発に外部のサーバーが必要な場合はまずそれがローカルで再現できないのか確認します。単なる \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/MySQL\"\u003eMySQL\u003c/a\u003e や \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/PostgreSQL\"\u003ePostgreSQL\u003c/a\u003e などをサーバーに繋いでいる場合はローカルで立ち上げるように変更します。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%DF%A5%E5%A5%EC%A1%BC%A5%BF%A1%BC\"\u003eエミュレーター\u003c/a\u003eが用意されているサービスであればそちらを使うようにします。この際に設定が直接書かれていたり ENV などでの切り替えしか対応していない場合は、設定を\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4\"\u003e環境変数\u003c/a\u003eに出して変更可能にします。\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" rel=\"footnote\"\u003e2\u003c/a\u003e\u003c/sup\u003e\n最近だと自分は M1 (\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Apple\"\u003eApple\u003c/a\u003e Silicon) \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Mac\"\u003eMac\u003c/a\u003e を使用しているので、この環境で動作しないものを使っているという場面に遭遇することもあります。この場合は Docker 化を真っ先に行います。\u003c/p\u003e\n\n\u003cp\u003e手順はあるけど手順通りにやっても上手く行かないという場合、「使っているライブラリのアップデートで動かなくなった」というケースと「プログラムの構造の変化に対応していない」というケースが多いです。どちらにしても変更を把握できていないということが原因ですので、メンテナンス体制に難があることが多いです。外部ライブラリの更新などは把握しておく、自分で修正した場合は環境構築手順もアップデートするフローにしておく、ということが必要になります。\u003c/p\u003e\n\n\u003ch1\u003e受け入れタスクが十分に実施可能な内容になっているか\u003c/h1\u003e\n\n\u003cp\u003eここでの障害は「ライブラリやツールの使い方が独自性の強いものになっていないか」「暗黙の知識が多用されていないか」といったものがあります。もちろん前述までの内容がクリアになっていないと作業に入ることもできませんので、それらを取り除いた後にようやく作業ができるということになります。\u003c/p\u003e\n\n\u003cp\u003e「ライブラリやツールの使い方が独自性の強いものになっていないか」というのは、自作ライブラリとかを使っている場合は当然ですが、ベストプ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E9%A5%AF\"\u003eラク\u003c/a\u003eティスに即していないようなライブラリの使い方をしているとか、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CB%E2%B2%FE%C2%A4\"\u003e魔改造\u003c/a\u003eされているというような場合には、なるべく本来の使い方に戻すよう指摘することがあります。「ライブラリやツールの公式の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C1%A5%E5%A1%BC%A5%C8%A5%EA%A5%A2%A5%EB\"\u003eチュートリアル\u003c/a\u003eを見た上でそれを使っている部分を読んだ時にすぐ理解できるようになっているか」というのが指標になります。\u003c/p\u003e\n\n\u003cp\u003e「暗黙の知識が多用されていないか」はそのままですが、プロジェクト固有の暗黙の知識がある場合は当然手を入れることができません。暗黙の知識が登場する場合はコメントなどで把握できるようになっていること、仕様と実態の乖離がないことなどを確認します。\u003c/p\u003e\n\n\u003ch1\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eこれらの点がクリアされているプロジェクトであれば、新しく人を入れることも容易ですし、引き継ぎの時にも困らないのではないかと思います。\u003c/p\u003e\n\n\u003cp\u003e書き漏れがあるかもしれないので、思い出したら追記する可能性があります。\u003c/p\u003e\n\n\u003cp\u003e今回はインフラの話は除外しましたが、インフラでチェックする点もまた機会があればまとめてみたいと思います。\u003c/p\u003e\n\n\u003cp\u003eこれらの点でお悩みの方は是非私までご相談をお願いします。詳細は \u003ca href=\"https://nazo.dev/profile\"\u003ehttps://nazo.dev/profile\u003c/a\u003e をご覧下さい。\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003e\u003ca href=\"https://www.slideshare.net/nazone/ss-205324165\"\u003ehttps://www.slideshare.net/nazone/ss-205324165\u003c/a\u003e もご覧下さい。\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:2\"\u003e\n\u003cp\u003e\u003ca href=\"https://12factor.net/ja/config\"\u003ehttps://12factor.net/ja/config\u003c/a\u003e\u003ca href=\"#fnref:2\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"フリーランスとしてWebエンジニアをしておりますが、プロジェクトに新規に入った時にどういう点を確認しているのかをまとめておきたいと思います。\nプロジェクトの目標と直近の目標が問題ないか\nプロジェクトの最終目標（理想）はとにかく大きくあるべきで、一方で直近の目標は具体的かつ十分に実現可能なサイズになっているべきです。もちろんその間くらいの目標（いわゆるマイルストーン）も存在しているはずです。\nフリーランスの立場だと目標そのものに直接口を出すことはないですが、直近の目標が大きすぎると手を動かす時に困ってしまいますので、どこを削ぎ落とすのが良いのかこちらから提案することはあります。\n開発プロセスが問題ないか\nプロジェクト参加直後はベロシティ（スプリント期間内の平均作業量）が不安定ですので、そこを許容できてちゃんと\n個人的には常にスクラムである必要はないと思いますが、マネージャーがいる場合はマネージャーが各メンバーのベロシティをちゃんと把握している、不在の場合は自分でベロシティが把握できていてタスクの見積もりができる、という状況になっていれば良いかと思います。「何だかよくわからないタスクをよくわからない期間で対応している」という状況では、前述の直近の目標の提案と同時に対処方法の提案を行うこともあります。\nデプロイが安定かつ高速に行えているか\nデプロイ速度は修正速度に直接繋がりますし、安定したデプロイができなければデプロイする単位が大きくなりがちですので、デプロイの安定性は最重要になります。\n当然デプロイは完全自動化されていて、誰でも気軽に（承認フローなどは別として）デプロイできることが前提です。\n誰でも簡単にデプロイできない場合、誰かにデプロイをお願いするというようなことが発生します。これでは自分と誰かの作業と、それを連絡する作業が増えてしまい、当然作業効率が悪くなってしまいますので、「誰でも」は重要です。「コマンド一発でデプロイできる」と見えても「（コマンドを実行する前にアクセスキーを取得して手元でデプロイ準備をして…）コマンド一発でデプロイできる」という場合がよくありますので、デプロイ環境自体が CI/CD 環境に移されていて手元の環境に影響せずデプロイできる（ CI サーバーが落ちていた場合は手元でも実行できる）というのが理想です。\nデプロイ方法が複雑になっていないか\n安定して高速にデプロイできていても、それを処理している方法が複雑だとメンテナンスの時に困ります。\nメインのコードは綺麗にできてもインフラ系のスクリプトは長くなりがちみたいなケースはよく見かけますが、インフラ系のスクリプトもメインのコード同様に読みやすく構造化されているべきです。またインフラ系はツールが充実していることが多いので、なるべく自分で書くスクリプトは最小限にするのが良いと思います。\nデプロイ自体が安定高速動作していればとりあえずは問題ないので、ここは後回しにすることも多いです。\nCI でコード品質が十分に守られているか\nCI の整備は後になればなるほど大変です。1これは CI で行うことの多くはコード品質そのものを一定の品質にする（ lint など）もののため、コード量が増えた後からそれを適用しようとすると修正点が膨大になるためです。\nlint はとにかくコード量が増える前に対処することが大事なので、ここは真っ先にチェックを行います。リリース前プロジェクトであればすぐ導入しますが、リリース後だと手を入れにくいので、最小限の設定にして少しずつ厳しくするという手法を採ります。\n（自動）テストはそもそもテストが書けているかというのをまず確認しますが、その上で「テストに再現性があるか」「テストの内容が十分か」「Test Sizes の分類が十分にできているか」といった内容を確認します。\n数回に１回落ちるようなテストがある場合で、それがテストの実行順に影響している場合はテストの書き方そのものに問題がある場合がほとんどですので、その場合は削除してしまったほうが良いことが多いです。一方で、時間に関わるテストや、乱数や数値計算の誤差などが影響するようなテストは、それ自体が重要なケースが多いのでちゃんと調査したほうがいいと思います。\nTest Sizes は、テストの分類を「単体テスト」「結合テスト」といった曖昧な呼び方ではなく、「我々のプロジェクトでは３段階の分類があり、それぞれのレベルではこうなっている」というものをプロジェクト固有で定義しようというものです。\nローカルでの環境構築が問題なく行えるか\n自分が受け入れられる側になるのですが、この時に受け入れ準備が十分にできているか確認し、できていない場合は改善しながら作業することになります。\n一番ありがちなのは環境構築手順が整備されていないということで、これは自分がそのまま作業するのですぐわかります。\nローカルの開発に外部のサーバーが必要な場合はまずそれがローカルで再現できないのか確認します。単なる MySQL や PostgreSQL などをサーバーに繋いでいる場合はローカルで立ち上げるように変更します。エミュレーターが用意されているサービスであればそちらを使うようにします。この際に設定が直接書かれていたり ENV などでの切り替えしか対応していない場合は、設定を環境変数に出して変更可能にします。2\n最近だと自分は M1 (Apple Silicon) Mac を使用しているので、この環境で動作しないものを使っているという場面に遭遇することもあります。この場合は Docker 化を真っ先に行います。\n手順はあるけど手順通りにやっても上手く行かないという場合、「使っているライブラリのアップデートで動かなくなった」というケースと「プログラムの構造の変化に対応していない」というケースが多いです。どちらにしても変更を把握できていないということが原因ですので、メンテナンス体制に難があることが多いです。外部ライブラリの更新などは把握しておく、自分で修正した場合は環境構築手順もアップデートするフローにしておく、ということが必要になります。\n受け入れタスクが十分に実施可能な内容になっているか\nここでの障害は「ライブラリやツールの使い方が独自性の強いものになっていないか」「暗黙の知識が多用されていないか」といったものがあります。もちろん前述までの内容がクリアになっていないと作業に入ることもできませんので、それらを取り除いた後にようやく作業ができるということになります。\n「ライブラリやツールの使い方が独自性の強いものになっていないか」というのは、自作ライブラリとかを使っている場合は当然ですが、ベストプラクティスに即していないようなライブラリの使い方をしているとか、魔改造されているというような場合には、なるべく本来の使い方に戻すよう指摘することがあります。「ライブラリやツールの公式のチュートリアルを見た上でそれを使っている部分を読んだ時にすぐ理解できるようになっているか」というのが指標になります。\n「暗黙の知識が多用されていないか」はそのままですが、プロジェクト固有の暗黙の知識がある場合は当然手を入れることができません。暗黙の知識が登場する場合はコメントなどで把握できるようになっていること、仕様と実態の乖離がないことなどを確認します。\nまとめ\nこれらの点がクリアされているプロジェクトであれば、新しく人を入れることも容易ですし、引き継ぎの時にも困らないのではないかと思います。\n書き漏れがあるかもしれないので、思い出したら追記する可能性があります。\n今回はインフラの話は除外しましたが、インフラでチェックする点もまた機会があればまとめてみたいと思います。\nこれらの点でお悩みの方は是非私までご相談をお願いします。詳細は https://nazo.dev/profile をご覧下さい。\nhttps://www.slideshare.net/nazone/ss-205324165 もご覧下さい。↩\n\n\nhttps://12factor.net/ja/config↩","summary":"フリーランスとしてWebエンジニアをしておりますが、プロジェクトに新規に入った時にどういう点を確認しているのかをまとめておきたいと思います。","id":"hatenablog://entry/26006613698182809","isoDate":"2021-03-03T03:00:00.000Z"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"ZJtsobfqSd7kc-sVhnieI","isFallback":false,"gsp":true,"scriptLoader":[{"src":"https://www.googletagmanager.com/gtag/js?id=G-VF0NMPGT9C","strategy":"afterInteractive"},{"id":"google-analytics","strategy":"afterInteractive","children":"\n              window.dataLayer = window.dataLayer || [];\n              function gtag(){window.dataLayer.push(arguments);}\n              gtag('js', new Date());\n\n              gtag('config', 'G-VF0NMPGT9C');\n            "}]}</script></body></html>